/**
 * Freeow!
 * Stylish, Growl-like message boxes
 *
 * Copyright (c) 2011 PJ Dietz
 * Version: 1.00
 * Licensed under the MIT license:
 * http://www.opensource.org/licenses/mit-license.php
 *
 * http://pjdietz.com/jquery-plugins/freeow/
 */
(function($){"use strict";var Freeow;Freeow=function(title,message,options){var startStyle,i,u;this.options=$.extend({},$.fn.freeow.defaults,options);this.element=$(this.options.template(title,message));if(this.options.startStyle){startStyle=this.options.startStyle;}
else{startStyle=this.options.hideStyle;}
this.element.css(startStyle);this.element.data("freeow",this);for(i=0,u=this.options.classes.length;i<u;i+=1){this.element.addClass(this.options.classes[i]);}
this.element.click(this.options.onClick);this.element.hover(this.options.onHover);this.autoHide=false;};Freeow.prototype={attach:function(container){$(container).prepend(this.element);this.show();},show:function(){var opts,self,fn,delay;opts={duration:this.showDuration};if(this.options.autoHide&&this.options.autoHideDelay>0){this.autoHide=true;self=this;delay=this.options.autoHideDelay;fn=function(){if(self.autoHide){self.hide();}};opts.complete=function(){setTimeout(fn,delay);};}
this.element.animate(this.options.showStyle,opts);},hide:function(){var self=this;this.element.animate(this.options.hideStyle,{duration:this.options.hideDuration,complete:function(){self.destroy();}});},destroy:function(){this.element.data("freeow",undefined);this.element.remove();}};if(typeof $.fn.freeow==="undefined"){$.fn.extend({freeow:function(title,message,options){return this.each(function(){var f;f=new Freeow(title,message,options);f.attach(this);});}});$.fn.freeow.defaults={autoHide:true,autoHideDelay:3000,classes:[],startStyle:null,showStyle:{opacity:1.0},showDuration:250,hideStyle:{opacity:0.0},hideDuration:500,onClick:function(event){$(this).data("freeow").hide();},onHover:function(event){$(this).data("freeow").autoHide=false;},template:function(title,message){var e;e=['<div>','<div class="background">','<div class="content">','<h2>'+title+'</h2>','<p>'+message+'</p>','</div>','</div>','<span class="icon"></span>','<span class="close"></span>','</div>'].join("");return e;}};}}(jQuery));/*

 FullCalendar v1.5.2
 http://arshaw.com/fullcalendar/

 Use fullcalendar.css for basic styling.
 For event drag & drop, requires jQuery UI draggable.
 For event resizing, requires jQuery UI resizable.

 Copyright (c) 2011 Adam Shaw
 Dual licensed under the MIT and GPL licenses, located in
 MIT-LICENSE.txt and GPL-LICENSE.txt respectively.

 Date: Sun Aug 21 22:06:09 2011 -0700

*/
(function(n,pa){function wb(a){n.extend(true,Ya,a)}function Yb(a,b,e){function c(k){if(B){u();q();na();R(k)}else f()}function f(){z=b.theme?"ui":"fc";a.addClass("fc");b.isRTL&&a.addClass("fc-rtl");b.theme&&a.addClass("ui-widget");B=n("<div class='fc-content' style='position:relative'/>").prependTo(a);F=new Zb(x,b);(O=F.render())&&a.prepend(O);A(b.defaultView);n(window).resize(oa);t()||g()}function g(){setTimeout(function(){!l.start&&t()&&R()},0)}function m(){n(window).unbind("resize",oa);F.destroy();
B.remove();a.removeClass("fc fc-rtl ui-widget")}function j(){return i.offsetWidth!==0}function t(){return n("body")[0].offsetWidth!==0}function A(k){if(!l||k!=l.name){G++;qa();var E=l,Z;if(E){(E.beforeHide||xb)();Za(B,B.height());E.element.hide()}else Za(B,1);B.css("overflow","hidden");if(l=X[k])l.element.show();else l=X[k]=new Ja[k](Z=s=n("<div class='fc-view fc-view-"+k+"' style='position:absolute'/>").appendTo(B),x);E&&F.deactivateButton(E.name);F.activateButton(k);R();B.css("overflow","");E&&
Za(B,1);Z||(l.afterShow||xb)();G--}}function R(k){if(j()){G++;qa();p===pa&&u();var E=false;if(!l.start||k||r<l.start||r>=l.end){l.render(r,k||0);ga(true);E=true}else if(l.sizeDirty){l.clearEvents();ga();E=true}else if(l.eventsDirty){l.clearEvents();E=true}l.sizeDirty=false;l.eventsDirty=false;ha(E);W=a.outerWidth();F.updateTitle(l.title);k=new Date;k>=l.start&&k<l.end?F.disableButton("today"):F.enableButton("today");G--;l.trigger("viewDisplay",i)}}function P(){q();if(j()){u();ga();qa();l.clearEvents();
l.renderEvents(K);l.sizeDirty=false}}function q(){n.each(X,function(k,E){E.sizeDirty=true})}function u(){p=b.contentHeight?b.contentHeight:b.height?b.height-(O?O.height():0)-Sa(B):Math.round(B.width()/Math.max(b.aspectRatio,0.5))}function ga(k){G++;l.setHeight(p,k);if(s){s.css("position","relative");s=null}l.setWidth(B.width(),k);G--}function oa(){if(!G)if(l.start){var k=++v;setTimeout(function(){if(k==v&&!G&&j())if(W!=(W=a.outerWidth())){G++;P();l.trigger("windowResize",i);G--}},200)}else g()}function ha(k){if(!b.lazyFetching||
$(l.visStart,l.visEnd))ra();else k&&ea()}function ra(){C(l.visStart,l.visEnd)}function ta(k){K=k;ea()}function ia(k){ea(k)}function ea(k){na();if(j()){l.clearEvents();l.renderEvents(K,k);l.eventsDirty=false}}function na(){n.each(X,function(k,E){E.eventsDirty=true})}function va(k,E,Z){l.select(k,E,Z===pa?true:Z)}function qa(){l&&l.unselect()}function S(){R(-1)}function da(){R(1)}function la(){gb(r,-1);R()}function sa(){gb(r,1);R()}function I(){r=new Date;R()}function o(k,E,Z){if(k instanceof Date)r=
M(k);else yb(r,k,E,Z);R()}function V(k,E,Z){k!==pa&&gb(r,k);E!==pa&&hb(r,E);Z!==pa&&ca(r,Z);R()}function Y(){return M(r)}function T(){return l}function d(k,E){if(E===pa)return b[k];if(k=="height"||k=="contentHeight"||k=="aspectRatio"){b[k]=E;P()}}function H(k,E){if(b[k])return b[k].apply(E||i,Array.prototype.slice.call(arguments,2))}var x=this;x.options=b;x.render=c;x.destroy=m;x.refetchEvents=ra;x.reportEvents=ta;x.reportEventChange=ia;x.rerenderEvents=ea;x.changeView=A;x.select=va;x.unselect=qa;
x.prev=S;x.next=da;x.prevYear=la;x.nextYear=sa;x.today=I;x.gotoDate=o;x.incrementDate=V;x.formatDate=function(k,E){return Oa(k,E,b)};x.formatDates=function(k,E,Z){return ib(k,E,Z,b)};x.getDate=Y;x.getView=T;x.option=d;x.trigger=H;$b.call(x,b,e);var $=x.isFetchNeeded,C=x.fetchEvents,i=a[0],F,O,B,z,l,X={},W,p,s,v=0,G=0,r=new Date,K=[],L;yb(r,b.year,b.month,b.date);b.droppable&&n(document).bind("dragstart",function(k,E){var Z=k.target,ka=n(Z);if(!ka.parents(".fc").length){var ja=b.dropAccept;if(n.isFunction(ja)?
ja.call(Z,ka):ka.is(ja)){L=Z;l.dragStart(L,k,E)}}}).bind("dragstop",function(k,E){if(L){l.dragStop(L,k,E);L=null}})}function Zb(a,b){function e(){q=b.theme?"ui":"fc";if(b.header)return P=n("<table class='fc-header' style='width:100%'/>").append(n("<tr/>").append(f("left")).append(f("center")).append(f("right")))}function c(){P.remove()}function f(u){var ga=n("<td class='fc-header-"+u+"'/>");(u=b.header[u])&&n.each(u.split(" "),function(oa){oa>0&&ga.append("<span class='fc-header-space'/>");var ha;
n.each(this.split(","),function(ra,ta){if(ta=="title"){ga.append("<span class='fc-header-title'><h2>&nbsp;</h2></span>");ha&&ha.addClass(q+"-corner-right");ha=null}else{var ia;if(a[ta])ia=a[ta];else if(Ja[ta])ia=function(){na.removeClass(q+"-state-hover");a.changeView(ta)};if(ia){ra=b.theme?jb(b.buttonIcons,ta):null;var ea=jb(b.buttonText,ta),na=n("<span class='fc-button fc-button-"+ta+" "+q+"-state-default'><span class='fc-button-inner'><span class='fc-button-content'>"+(ra?"<span class='fc-icon-wrap'><span class='ui-icon ui-icon-"+
ra+"'/></span>":ea)+"</span><span class='fc-button-effect'><span></span></span></span></span>");if(na){na.click(function(){na.hasClass(q+"-state-disabled")||ia()}).mousedown(function(){na.not("."+q+"-state-active").not("."+q+"-state-disabled").addClass(q+"-state-down")}).mouseup(function(){na.removeClass(q+"-state-down")}).hover(function(){na.not("."+q+"-state-active").not("."+q+"-state-disabled").addClass(q+"-state-hover")},function(){na.removeClass(q+"-state-hover").removeClass(q+"-state-down")}).appendTo(ga);
ha||na.addClass(q+"-corner-left");ha=na}}}});ha&&ha.addClass(q+"-corner-right")});return ga}function g(u){P.find("h2").html(u)}function m(u){P.find("span.fc-button-"+u).addClass(q+"-state-active")}function j(u){P.find("span.fc-button-"+u).removeClass(q+"-state-active")}function t(u){P.find("span.fc-button-"+u).addClass(q+"-state-disabled")}function A(u){P.find("span.fc-button-"+u).removeClass(q+"-state-disabled")}var R=this;R.render=e;R.destroy=c;R.updateTitle=g;R.activateButton=m;R.deactivateButton=
j;R.disableButton=t;R.enableButton=A;var P=n([]),q}function $b(a,b){function e(d,H){return!da||d<da||H>la}function c(d,H){da=d;la=H;sa=d.getTimezoneOffset()*60*1E3;I=H.getTimezoneOffset()*60*1E3;T=[];d=++o;V=H=S.length;for(var x=0;x<H;x++)f(S[x],d)}function f(d,H){g(d,function(x){if(H==o){if(x){for(var $=0;$<x.length;$++){x[$].source=d;oa(x[$])}T=T.concat(x)}V--;V||va(T)}})}function g(d,H){var x,$=Aa.sourceFetchers,C;for(x=0;x<$.length;x++){C=$[x](d,da,la,H);if(C===true)return;else if(typeof C=="object"){g(C,
H);return}}if(x=d.events)if(n.isFunction(x)){u();x(M(da),M(la),function(z){H(z);ga()})}else n.isArray(x)?H(x):H();else if(d.url){var i=d.success,F=d.error,O=d.complete;x=n.extend({},d.data||{});C=Ta(d.startParam,a.startParam);$=Ta(d.endParam,a.endParam);if(C){var B=da;if(d.startParamUTC)B-=sa;x[C]=Math.round(+B/1E3)}if($){C=la;if(d.endParamUTC)C-=I;x[$]=Math.round(+C/1E3)}u();n.ajax(n.extend({},ac,d,{data:x,success:function(z){z=z||[];var l=$a(i,this,arguments);if(n.isArray(l))z=l;H(z)},error:function(){$a(F,
this,arguments);H()},complete:function(){$a(O,this,arguments);ga()}}))}else H()}function m(d){if(d=j(d)){V++;f(d,o)}}function j(d){if(n.isFunction(d)||n.isArray(d))d={events:d};else if(typeof d=="string")d={url:d};if(typeof d=="object"){ha(d);S.push(d);return d}}function t(d){S=n.grep(S,function(H){return!ra(H,d)});T=n.grep(T,function(H){return!ra(H.source,d)});va(T)}function A(d){var H,x=T.length,$,C=na().defaultEventEnd,i=d.start-d._start,F=d.end?d.end-(d._end||C(d)):0;for(H=0;H<x;H++){$=T[H];if($._id==
d._id&&$!=d){$.start=new Date(+$.start+i);$.end=d.end?$.end?new Date(+$.end+F):new Date(+C($)+F):null;$.title=d.title;$.url=d.url;$.allDay=d.allDay;$.className=d.className;$.editable=d.editable;$.color=d.color;$.backgroudColor=d.backgroudColor;$.borderColor=d.borderColor;$.textColor=d.textColor;oa($)}}oa(d);va(T)}function R(d,H){oa(d);if(!d.source){if(H){qa.events.push(d);d.source=qa}T.push(d)}va(T)}function P(d){if(d){if(!n.isFunction(d)){var H=d+"";d=function($){return $._id==H}}T=n.grep(T,d,true);
for(x=0;x<S.length;x++)if(n.isArray(S[x].events))S[x].events=n.grep(S[x].events,d,true)}else{T=[];for(var x=0;x<S.length;x++)if(n.isArray(S[x].events))S[x].events=[]}va(T)}function q(d){if(n.isFunction(d))return n.grep(T,d);else if(d){d+="";return n.grep(T,function(H){return H._id==d})}return T}function u(){Y++||ea("loading",null,true)}function ga(){--Y||ea("loading",null,false)}function oa(d){var H=d.source||{},x=Ta(H.ignoreTimezone,a.ignoreTimezone);d._id=d._id||(d.id===pa?"_fc"+bc++:d.id+"");if(d.date){if(!d.start)d.start=
d.date;delete d.date}d._start=M(d.start=kb(d.start,x));d.end=kb(d.end,x);if(d.end&&d.end<=d.start)d.end=null;d._end=d.end?M(d.end):null;if(d.allDay===pa)d.allDay=Ta(H.allDayDefault,a.allDayDefault);if(d.className){if(typeof d.className=="string")d.className=d.className.split(/\s+/)}else d.className=[]}function ha(d){if(d.className){if(typeof d.className=="string")d.className=d.className.split(/\s+/)}else d.className=[];for(var H=Aa.sourceNormalizers,x=0;x<H.length;x++)H[x](d)}function ra(d,H){return d&&
H&&ta(d)==ta(H)}function ta(d){return(typeof d=="object"?d.events||d.url:"")||d}var ia=this;ia.isFetchNeeded=e;ia.fetchEvents=c;ia.addEventSource=m;ia.removeEventSource=t;ia.updateEvent=A;ia.renderEvent=R;ia.removeEvents=P;ia.clientEvents=q;ia.normalizeEvent=oa;var ea=ia.trigger,na=ia.getView,va=ia.reportEvents,qa={events:[]},S=[qa],da,la,sa,I,o=0,V=0,Y=0,T=[];for(ia=0;ia<b.length;ia++)j(b[ia])}function gb(a,b,e){a.setFullYear(a.getFullYear()+b);e||Ka(a);return a}function hb(a,b,e){if(+a){b=a.getMonth()+
b;var c=M(a);c.setDate(1);c.setMonth(b);a.setMonth(b);for(e||Ka(a);a.getMonth()!=c.getMonth();)a.setDate(a.getDate()+(a<c?1:-1))}return a}function ca(a,b,e){if(+a){b=a.getDate()+b;var c=M(a);c.setHours(9);c.setDate(b);a.setDate(b);e||Ka(a);lb(a,c)}return a}function lb(a,b){if(+a)for(;a.getDate()!=b.getDate();)a.setTime(+a+(a<b?1:-1)*cc)}function ya(a,b){a.setMinutes(a.getMinutes()+b);return a}function Ka(a){a.setHours(0);a.setMinutes(0);a.setSeconds(0);a.setMilliseconds(0);return a}function M(a,b){if(b)return Ka(new Date(+a));
return new Date(+a)}function zb(){var a=0,b;do b=new Date(1970,a++,1);while(b.getHours());return b}function Fa(a,b,e){for(b=b||1;!a.getDay()||e&&a.getDay()==1||!e&&a.getDay()==6;)ca(a,b);return a}function Ca(a,b){return Math.round((M(a,true)-M(b,true))/Ab)}function yb(a,b,e,c){if(b!==pa&&b!=a.getFullYear()){a.setDate(1);a.setMonth(0);a.setFullYear(b)}if(e!==pa&&e!=a.getMonth()){a.setDate(1);a.setMonth(e)}c!==pa&&a.setDate(c)}function kb(a,b){if(typeof a=="object")return a;if(typeof a=="number")return new Date(a*
1E3);if(typeof a=="string"){if(a.match(/^\d+(\.\d+)?$/))return new Date(parseFloat(a)*1E3);if(b===pa)b=true;return Bb(a,b)||(a?new Date(a):null)}return null}function Bb(a,b){a=a.match(/^([0-9]{4})(-([0-9]{2})(-([0-9]{2})([T ]([0-9]{2}):([0-9]{2})(:([0-9]{2})(\.([0-9]+))?)?(Z|(([-+])([0-9]{2})(:?([0-9]{2}))?))?)?)?)?$/);if(!a)return null;var e=new Date(a[1],0,1);if(b||!a[13]){b=new Date(a[1],0,1,9,0);if(a[3]){e.setMonth(a[3]-1);b.setMonth(a[3]-1)}if(a[5]){e.setDate(a[5]);b.setDate(a[5])}lb(e,b);a[7]&&
e.setHours(a[7]);a[8]&&e.setMinutes(a[8]);a[10]&&e.setSeconds(a[10]);a[12]&&e.setMilliseconds(Number("0."+a[12])*1E3);lb(e,b)}else{e.setUTCFullYear(a[1],a[3]?a[3]-1:0,a[5]||1);e.setUTCHours(a[7]||0,a[8]||0,a[10]||0,a[12]?Number("0."+a[12])*1E3:0);if(a[14]){b=Number(a[16])*60+(a[18]?Number(a[18]):0);b*=a[15]=="-"?1:-1;e=new Date(+e+b*60*1E3)}}return e}function mb(a){if(typeof a=="number")return a*60;if(typeof a=="object")return a.getHours()*60+a.getMinutes();if(a=a.match(/(\d+)(?::(\d+))?\s*(\w+)?/)){var b=
parseInt(a[1],10);if(a[3]){b%=12;if(a[3].toLowerCase().charAt(0)=="p")b+=12}return b*60+(a[2]?parseInt(a[2],10):0)}}function Oa(a,b,e){return ib(a,null,b,e)}function ib(a,b,e,c){c=c||Ya;var f=a,g=b,m,j=e.length,t,A,R,P="";for(m=0;m<j;m++){t=e.charAt(m);if(t=="'")for(A=m+1;A<j;A++){if(e.charAt(A)=="'"){if(f){P+=A==m+1?"'":e.substring(m+1,A);m=A}break}}else if(t=="(")for(A=m+1;A<j;A++){if(e.charAt(A)==")"){m=Oa(f,e.substring(m+1,A),c);if(parseInt(m.replace(/\D/,""),10))P+=m;m=A;break}}else if(t=="[")for(A=
m+1;A<j;A++){if(e.charAt(A)=="]"){t=e.substring(m+1,A);m=Oa(f,t,c);if(m!=Oa(g,t,c))P+=m;m=A;break}}else if(t=="{"){f=b;g=a}else if(t=="}"){f=a;g=b}else{for(A=j;A>m;A--)if(R=dc[e.substring(m,A)]){if(f)P+=R(f,c);m=A-1;break}if(A==m)if(f)P+=t}}return P}function Ua(a){return a.end?ec(a.end,a.allDay):ca(M(a.start),1)}function ec(a,b){a=M(a);return b||a.getHours()||a.getMinutes()?ca(a,1):Ka(a)}function fc(a,b){return(b.msLength-a.msLength)*100+(a.event.start-b.event.start)}function Cb(a,b){return a.end>
b.start&&a.start<b.end}function nb(a,b,e,c){var f=[],g,m=a.length,j,t,A,R,P;for(g=0;g<m;g++){j=a[g];t=j.start;A=b[g];if(A>e&&t<c){if(t<e){t=M(e);R=false}else{t=t;R=true}if(A>c){A=M(c);P=false}else{A=A;P=true}f.push({event:j,start:t,end:A,isStart:R,isEnd:P,msLength:A-t})}}return f.sort(fc)}function ob(a){var b=[],e,c=a.length,f,g,m,j;for(e=0;e<c;e++){f=a[e];for(g=0;;){m=false;if(b[g])for(j=0;j<b[g].length;j++)if(Cb(b[g][j],f)){m=true;break}if(m)g++;else break}if(b[g])b[g].push(f);else b[g]=[f]}return b}
function Db(a,b,e){a.unbind("mouseover").mouseover(function(c){for(var f=c.target,g;f!=this;){g=f;f=f.parentNode}if((f=g._fci)!==pa){g._fci=pa;g=b[f];e(g.event,g.element,g);n(c.target).trigger(c)}c.stopPropagation()})}function Va(a,b,e){for(var c=0,f;c<a.length;c++){f=n(a[c]);f.width(Math.max(0,b-pb(f,e)))}}function Eb(a,b,e){for(var c=0,f;c<a.length;c++){f=n(a[c]);f.height(Math.max(0,b-Sa(f,e)))}}function pb(a,b){return gc(a)+hc(a)+(b?ic(a):0)}function gc(a){return(parseFloat(n.curCSS(a[0],"paddingLeft",
true))||0)+(parseFloat(n.curCSS(a[0],"paddingRight",true))||0)}function ic(a){return(parseFloat(n.curCSS(a[0],"marginLeft",true))||0)+(parseFloat(n.curCSS(a[0],"marginRight",true))||0)}function hc(a){return(parseFloat(n.curCSS(a[0],"borderLeftWidth",true))||0)+(parseFloat(n.curCSS(a[0],"borderRightWidth",true))||0)}function Sa(a,b){return jc(a)+kc(a)+(b?Fb(a):0)}function jc(a){return(parseFloat(n.curCSS(a[0],"paddingTop",true))||0)+(parseFloat(n.curCSS(a[0],"paddingBottom",true))||0)}function Fb(a){return(parseFloat(n.curCSS(a[0],
"marginTop",true))||0)+(parseFloat(n.curCSS(a[0],"marginBottom",true))||0)}function kc(a){return(parseFloat(n.curCSS(a[0],"borderTopWidth",true))||0)+(parseFloat(n.curCSS(a[0],"borderBottomWidth",true))||0)}function Za(a,b){b=typeof b=="number"?b+"px":b;a.each(function(e,c){c.style.cssText+=";min-height:"+b+";_height:"+b})}function xb(){}function Gb(a,b){return a-b}function Hb(a){return Math.max.apply(Math,a)}function Pa(a){return(a<10?"0":"")+a}function jb(a,b){if(a[b]!==pa)return a[b];b=b.split(/(?=[A-Z])/);
for(var e=b.length-1,c;e>=0;e--){c=a[b[e].toLowerCase()];if(c!==pa)return c}return a[""]}function Qa(a){return a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#039;").replace(/"/g,"&quot;").replace(/\n/g,"<br />")}function Ib(a){return a.id+"/"+a.className+"/"+a.style.cssText.replace(/(^|;)\s*(top|left|width|height)\s*:[^;]*/ig,"")}function qb(a){a.attr("unselectable","on").css("MozUserSelect","none").bind("selectstart.ui",function(){return false})}function ab(a){a.children().removeClass("fc-first fc-last").filter(":first-child").addClass("fc-first").end().filter(":last-child").addClass("fc-last")}
function rb(a,b){a.each(function(e,c){c.className=c.className.replace(/^fc-\w*/,"fc-"+lc[b.getDay()])})}function Jb(a,b){var e=a.source||{},c=a.color,f=e.color,g=b("eventColor"),m=a.backgroundColor||c||e.backgroundColor||f||b("eventBackgroundColor")||g;c=a.borderColor||c||e.borderColor||f||b("eventBorderColor")||g;a=a.textColor||e.textColor||b("eventTextColor");b=[];m&&b.push("background-color:"+m);c&&b.push("border-color:"+c);a&&b.push("color:"+a);return b.join(";")}function $a(a,b,e){if(n.isFunction(a))a=
[a];if(a){var c,f;for(c=0;c<a.length;c++)f=a[c].apply(b,e)||f;return f}}function Ta(){for(var a=0;a<arguments.length;a++)if(arguments[a]!==pa)return arguments[a]}function mc(a,b){function e(j,t){if(t){hb(j,t);j.setDate(1)}j=M(j,true);j.setDate(1);t=hb(M(j),1);var A=M(j),R=M(t),P=f("firstDay"),q=f("weekends")?0:1;if(q){Fa(A);Fa(R,-1,true)}ca(A,-((A.getDay()-Math.max(P,q)+7)%7));ca(R,(7-R.getDay()+Math.max(P,q))%7);P=Math.round((R-A)/(Ab*7));if(f("weekMode")=="fixed"){ca(R,(6-P)*7);P=6}c.title=m(j,
f("titleFormat"));c.start=j;c.end=t;c.visStart=A;c.visEnd=R;g(6,P,q?5:7,true)}var c=this;c.render=e;sb.call(c,a,b,"month");var f=c.opt,g=c.renderBasic,m=b.formatDate}function nc(a,b){function e(j,t){t&&ca(j,t*7);j=ca(M(j),-((j.getDay()-f("firstDay")+7)%7));t=ca(M(j),7);var A=M(j),R=M(t),P=f("weekends");if(!P){Fa(A);Fa(R,-1,true)}c.title=m(A,ca(M(R),-1),f("titleFormat"));c.start=j;c.end=t;c.visStart=A;c.visEnd=R;g(1,1,P?7:5,false)}var c=this;c.render=e;sb.call(c,a,b,"basicWeek");var f=c.opt,g=c.renderBasic,
m=b.formatDates}function oc(a,b){function e(j,t){if(t){ca(j,t);f("weekends")||Fa(j,t<0?-1:1)}c.title=m(j,f("titleFormat"));c.start=c.visStart=M(j,true);c.end=c.visEnd=ca(M(c.start),1);g(1,1,1,false)}var c=this;c.render=e;sb.call(c,a,b,"basicDay");var f=c.opt,g=c.renderBasic,m=b.formatDate}function sb(a,b,e){function c(w,J,Q,U){v=J;G=Q;f();(J=!F)?g(w,U):T();m(J)}function f(){if(k=V("isRTL")){E=-1;Z=G-1}else{E=1;Z=0}ka=V("firstDay");ja=V("weekends")?0:1;ma=V("theme")?"ui":"fc";aa=V("columnFormat")}
function g(w,J){var Q,U=ma+"-widget-header",fa=ma+"-widget-content",ba;Q="<table class='fc-border-separate' style='width:100%' cellspacing='0'><thead><tr>";for(ba=0;ba<G;ba++)Q+="<th class='fc- "+U+"'/>";Q+="</tr></thead><tbody>";for(ba=0;ba<w;ba++){Q+="<tr class='fc-week"+ba+"'>";for(U=0;U<G;U++)Q+="<td class='fc- "+fa+" fc-day"+(ba*G+U)+"'><div>"+(J?"<div class='fc-day-number'/>":"")+"<div class='fc-day-content'><div style='position:relative'>&nbsp;</div></div></div></td>";Q+="</tr>"}Q+="</tbody></table>";
w=n(Q).appendTo(a);C=w.find("thead");i=C.find("th");F=w.find("tbody");O=F.find("tr");B=F.find("td");z=B.filter(":first-child");l=O.eq(0).find("div.fc-day-content div");ab(C.add(C.find("tr")));ab(O);O.eq(0).addClass("fc-first");A(B);X=n("<div style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(a)}function m(w){var J=w||v==1,Q=o.start.getMonth(),U=Ka(new Date),fa,ba,wa;J&&i.each(function(xa,Ga){fa=n(Ga);ba=da(xa);fa.html($(ba,aa));rb(fa,ba)});B.each(function(xa,Ga){fa=n(Ga);ba=da(xa);ba.getMonth()==
Q?fa.removeClass("fc-other-month"):fa.addClass("fc-other-month");+ba==+U?fa.addClass(ma+"-state-highlight fc-today"):fa.removeClass(ma+"-state-highlight fc-today");fa.find("div.fc-day-number").text(ba.getDate());J&&rb(fa,ba)});O.each(function(xa,Ga){wa=n(Ga);if(xa<v){wa.show();xa==v-1?wa.addClass("fc-last"):wa.removeClass("fc-last")}else wa.hide()})}function j(w){p=w;w=p-C.height();var J,Q,U;if(V("weekMode")=="variable")J=Q=Math.floor(w/(v==1?2:6));else{J=Math.floor(w/v);Q=w-J*(v-1)}z.each(function(fa,
ba){if(fa<v){U=n(ba);Za(U.find("> div"),(fa==v-1?Q:J)-Sa(U))}})}function t(w){W=w;L.clear();s=Math.floor(W/G);Va(i.slice(0,-1),s)}function A(w){w.click(R).mousedown(x)}function R(w){if(!V("selectable")){var J=parseInt(this.className.match(/fc\-day(\d+)/)[1]);J=da(J);Y("dayClick",this,J,true,w)}}function P(w,J,Q){Q&&r.build();Q=M(o.visStart);for(var U=ca(M(Q),G),fa=0;fa<v;fa++){var ba=new Date(Math.max(Q,w)),wa=new Date(Math.min(U,J));if(ba<wa){var xa;if(k){xa=Ca(wa,Q)*E+Z+1;ba=Ca(ba,Q)*E+Z+1}else{xa=
Ca(ba,Q);ba=Ca(wa,Q)}A(q(fa,xa,fa,ba-1))}ca(Q,7);ca(U,7)}}function q(w,J,Q,U){w=r.rect(w,J,Q,U,a);return d(w,a)}function u(w){return M(w)}function ga(w,J){P(w,ca(M(J),1),true)}function oa(){H()}function ha(w,J,Q){var U=va(w);Y("dayClick",B[U.row*G+U.col],w,J,Q)}function ra(w,J){K.start(function(Q){H();Q&&q(Q.row,Q.col,Q.row,Q.col)},J)}function ta(w,J,Q){var U=K.stop();H();if(U){U=qa(U);Y("drop",w,U,true,J,Q)}}function ia(w){return M(w.start)}function ea(w){return L.left(w)}function na(w){return L.right(w)}
function va(w){return{row:Math.floor(Ca(w,o.visStart)/7),col:la(w.getDay())}}function qa(w){return S(w.row,w.col)}function S(w,J){return ca(M(o.visStart),w*7+J*E+Z)}function da(w){return S(Math.floor(w/G),w%G)}function la(w){return(w-Math.max(ka,ja)+G)%G*E+Z}function sa(w){return O.eq(w)}function I(){return{left:0,right:W}}var o=this;o.renderBasic=c;o.setHeight=j;o.setWidth=t;o.renderDayOverlay=P;o.defaultSelectionEnd=u;o.renderSelection=ga;o.clearSelection=oa;o.reportDayClick=ha;o.dragStart=ra;o.dragStop=
ta;o.defaultEventEnd=ia;o.getHoverListener=function(){return K};o.colContentLeft=ea;o.colContentRight=na;o.dayOfWeekCol=la;o.dateCell=va;o.cellDate=qa;o.cellIsAllDay=function(){return true};o.allDayRow=sa;o.allDayBounds=I;o.getRowCnt=function(){return v};o.getColCnt=function(){return G};o.getColWidth=function(){return s};o.getDaySegmentContainer=function(){return X};Kb.call(o,a,b,e);Lb.call(o);Mb.call(o);pc.call(o);var V=o.opt,Y=o.trigger,T=o.clearEvents,d=o.renderOverlay,H=o.clearOverlays,x=o.daySelectionMousedown,
$=b.formatDate,C,i,F,O,B,z,l,X,W,p,s,v,G,r,K,L,k,E,Z,ka,ja,ma,aa;qb(a.addClass("fc-grid"));r=new Nb(function(w,J){var Q,U,fa;i.each(function(ba,wa){Q=n(wa);U=Q.offset().left;if(ba)fa[1]=U;fa=[U];J[ba]=fa});fa[1]=U+Q.outerWidth();O.each(function(ba,wa){if(ba<v){Q=n(wa);U=Q.offset().top;if(ba)fa[1]=U;fa=[U];w[ba]=fa}});fa[1]=U+Q.outerHeight()});K=new Ob(r);L=new Pb(function(w){return l.eq(w)})}function pc(){function a(S,da){R(S);va(e(S),da)}function b(){P();ha().empty()}function e(S){var da=ea(),la=
na(),sa=M(g.visStart);la=ca(M(sa),la);var I=n.map(S,Ua),o,V,Y,T,d,H,x=[];for(o=0;o<da;o++){V=ob(nb(S,I,sa,la));for(Y=0;Y<V.length;Y++){T=V[Y];for(d=0;d<T.length;d++){H=T[d];H.row=o;H.level=Y;x.push(H)}}ca(sa,7);ca(la,7)}return x}function c(S,da,la){t(S)&&f(S,da);la.isEnd&&A(S)&&qa(S,da,la);q(S,da)}function f(S,da){var la=ra(),sa;da.draggable({zIndex:9,delay:50,opacity:m("dragOpacity"),revertDuration:m("dragRevertDuration"),start:function(I,o){j("eventDragStart",da,S,I,o);ga(S,da);la.start(function(V,
Y,T,d){da.draggable("option","revert",!V||!T&&!d);ia();if(V){sa=T*7+d*(m("isRTL")?-1:1);ta(ca(M(S.start),sa),ca(Ua(S),sa))}else sa=0},I,"drag")},stop:function(I,o){la.stop();ia();j("eventDragStop",da,S,I,o);if(sa)oa(this,S,sa,0,S.allDay,I,o);else{da.css("filter","");u(S,da)}}})}var g=this;g.renderEvents=a;g.compileDaySegs=e;g.clearEvents=b;g.bindDaySeg=c;Qb.call(g);var m=g.opt,j=g.trigger,t=g.isEventDraggable,A=g.isEventResizable,R=g.reportEvents,P=g.reportEventClear,q=g.eventElementHandlers,u=g.showEvents,
ga=g.hideEvents,oa=g.eventDrop,ha=g.getDaySegmentContainer,ra=g.getHoverListener,ta=g.renderDayOverlay,ia=g.clearOverlays,ea=g.getRowCnt,na=g.getColCnt,va=g.renderDaySegs,qa=g.resizableDayEvent}function qc(a,b){function e(j,t){t&&ca(j,t*7);j=ca(M(j),-((j.getDay()-f("firstDay")+7)%7));t=ca(M(j),7);var A=M(j),R=M(t),P=f("weekends");if(!P){Fa(A);Fa(R,-1,true)}c.title=m(A,ca(M(R),-1),f("titleFormat"));c.start=j;c.end=t;c.visStart=A;c.visEnd=R;g(P?7:5)}var c=this;c.render=e;Rb.call(c,a,b,"agendaWeek");
var f=c.opt,g=c.renderAgenda,m=b.formatDates}function rc(a,b){function e(j,t){if(t){ca(j,t);f("weekends")||Fa(j,t<0?-1:1)}t=M(j,true);var A=ca(M(t),1);c.title=m(j,f("titleFormat"));c.start=c.visStart=t;c.end=c.visEnd=A;g(1)}var c=this;c.render=e;Rb.call(c,a,b,"agendaDay");var f=c.opt,g=c.renderAgenda,m=b.formatDate}function Rb(a,b,e){function c(h){Ba=h;f();v?O():g();m()}function f(){Wa=i("theme")?"ui":"fc";Sb=i("weekends")?0:1;Tb=i("firstDay");if(Ub=i("isRTL")){Ha=-1;Ia=Ba-1}else{Ha=1;Ia=0}La=mb(i("minTime"));
bb=mb(i("maxTime"));Vb=i("columnFormat")}function g(){var h=Wa+"-widget-header",N=Wa+"-widget-content",y,D,ua,za,Da,Ea=i("slotMinutes")%15==0;y="<table style='width:100%' class='fc-agenda-days fc-border-separate' cellspacing='0'><thead><tr><th class='fc-agenda-axis "+h+"'>&nbsp;</th>";for(D=0;D<Ba;D++)y+="<th class='fc- fc-col"+D+" "+h+"'/>";y+="<th class='fc-agenda-gutter "+h+"'>&nbsp;</th></tr></thead><tbody><tr><th class='fc-agenda-axis "+h+"'>&nbsp;</th>";for(D=0;D<Ba;D++)y+="<td class='fc- fc-col"+
D+" "+N+"'><div><div class='fc-day-content'><div style='position:relative'>&nbsp;</div></div></div></td>";y+="<td class='fc-agenda-gutter "+N+"'>&nbsp;</td></tr></tbody></table>";v=n(y).appendTo(a);G=v.find("thead");r=G.find("th").slice(1,-1);K=v.find("tbody");L=K.find("td").slice(0,-1);k=L.find("div.fc-day-content div");E=L.eq(0);Z=E.find("> div");ab(G.add(G.find("tr")));ab(K.add(K.find("tr")));ba=G.find("th:first");wa=v.find(".fc-agenda-gutter");ka=n("<div style='position:absolute;z-index:2;left:0;width:100%'/>").appendTo(a);
if(i("allDaySlot")){ja=n("<div style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(ka);y="<table style='width:100%' class='fc-agenda-allday' cellspacing='0'><tr><th class='"+h+" fc-agenda-axis'>"+i("allDayText")+"</th><td><div class='fc-day-content'><div style='position:relative'/></div></td><th class='"+h+" fc-agenda-gutter'>&nbsp;</th></tr></table>";ma=n(y).appendTo(ka);aa=ma.find("tr");q(aa.find("td"));ba=ba.add(ma.find("th:first"));wa=wa.add(ma.find("th.fc-agenda-gutter"));ka.append("<div class='fc-agenda-divider "+
h+"'><div class='fc-agenda-divider-inner'/></div>")}else ja=n([]);w=n("<div style='position:absolute;width:100%;overflow-x:hidden;overflow-y:auto'/>").appendTo(ka);J=n("<div style='position:relative;width:100%;overflow:hidden'/>").appendTo(w);Q=n("<div style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(J);y="<table class='fc-agenda-slots' style='width:100%' cellspacing='0'><tbody>";ua=zb();za=ya(M(ua),bb);ya(ua,La);for(D=tb=0;ua<za;D++){Da=ua.getMinutes();y+="<tr class='fc-slot"+D+" "+
(!Da?"":"fc-minor")+"'><th class='fc-agenda-axis "+h+"'>"+(!Ea||!Da?s(ua,i("axisFormat")):"&nbsp;")+"</th><td class='"+N+"'><div style='position:relative'>&nbsp;</div></td></tr>";ya(ua,i("slotMinutes"));tb++}y+="</tbody></table>";U=n(y).appendTo(J);fa=U.find("div:first");u(U.find("td"));ba=ba.add(U.find("th:first"))}function m(){var h,N,y,D,ua=Ka(new Date);for(h=0;h<Ba;h++){D=va(h);N=r.eq(h);N.html(s(D,Vb));y=L.eq(h);+D==+ua?y.addClass(Wa+"-state-highlight fc-today"):y.removeClass(Wa+"-state-highlight fc-today");
rb(N.add(y),D)}}function j(h,N){if(h===pa)h=Wb;Wb=h;ub={};var y=K.position().top,D=w.position().top;h=Math.min(h-y,U.height()+D+1);Z.height(h-Sa(E));ka.css("top",y);w.height(h-D-1);Xa=fa.height()+1;N&&A()}function t(h){Ga=h;cb.clear();Ma=0;Va(ba.width("").each(function(N,y){Ma=Math.max(Ma,n(y).outerWidth())}),Ma);h=w[0].clientWidth;if(vb=w.width()-h){Va(wa,vb);wa.show().prev().removeClass("fc-last")}else wa.hide().prev().addClass("fc-last");db=Math.floor((h-Ma)/Ba);Va(r.slice(0,-1),db)}function A(){function h(){w.scrollTop(D)}
var N=zb(),y=M(N);y.setHours(i("firstHour"));var D=da(N,y)+1;h();setTimeout(h,0)}function R(){Xb=w.scrollTop()}function P(){w.scrollTop(Xb)}function q(h){h.click(ga).mousedown(W)}function u(h){h.click(ga).mousedown(d)}function ga(h){if(!i("selectable")){var N=Math.min(Ba-1,Math.floor((h.pageX-v.offset().left-Ma)/db)),y=va(N),D=this.parentNode.className.match(/fc-slot(\d+)/);if(D){D=parseInt(D[1])*i("slotMinutes");var ua=Math.floor(D/60);y.setHours(ua);y.setMinutes(D%60+La);F("dayClick",L[N],y,false,
h)}else F("dayClick",L[N],y,true,h)}}function oa(h,N,y){y&&Na.build();var D=M(C.visStart);if(Ub){y=Ca(N,D)*Ha+Ia+1;h=Ca(h,D)*Ha+Ia+1}else{y=Ca(h,D);h=Ca(N,D)}y=Math.max(0,y);h=Math.min(Ba,h);y<h&&q(ha(0,y,0,h-1))}function ha(h,N,y,D){h=Na.rect(h,N,y,D,ka);return B(h,ka)}function ra(h,N){for(var y=M(C.visStart),D=ca(M(y),1),ua=0;ua<Ba;ua++){var za=new Date(Math.max(y,h)),Da=new Date(Math.min(D,N));if(za<Da){var Ea=ua*Ha+Ia;Ea=Na.rect(0,Ea,0,Ea,J);za=da(y,za);Da=da(y,Da);Ea.top=za;Ea.height=Da-za;u(B(Ea,
J))}ca(y,1);ca(D,1)}}function ta(h){return cb.left(h)}function ia(h){return cb.right(h)}function ea(h){return{row:Math.floor(Ca(h,C.visStart)/7),col:S(h.getDay())}}function na(h){var N=va(h.col);h=h.row;i("allDaySlot")&&h--;h>=0&&ya(N,La+h*i("slotMinutes"));return N}function va(h){return ca(M(C.visStart),h*Ha+Ia)}function qa(h){return i("allDaySlot")&&!h.row}function S(h){return(h-Math.max(Tb,Sb)+Ba)%Ba*Ha+Ia}function da(h,N){h=M(h,true);if(N<ya(M(h),La))return 0;if(N>=ya(M(h),bb))return U.height();
h=i("slotMinutes");N=N.getHours()*60+N.getMinutes()-La;var y=Math.floor(N/h),D=ub[y];if(D===pa)D=ub[y]=U.find("tr:eq("+y+") td div")[0].offsetTop;return Math.max(0,Math.round(D-1+Xa*(N%h/h)))}function la(){return{left:Ma,right:Ga-vb}}function sa(){return aa}function I(h){var N=M(h.start);if(h.allDay)return N;return ya(N,i("defaultEventMinutes"))}function o(h,N){if(N)return M(h);return ya(M(h),i("slotMinutes"))}function V(h,N,y){if(y)i("allDaySlot")&&oa(h,ca(M(N),1),true);else Y(h,N)}function Y(h,
N){var y=i("selectHelper");Na.build();if(y){var D=Ca(h,C.visStart)*Ha+Ia;if(D>=0&&D<Ba){D=Na.rect(0,D,0,D,J);var ua=da(h,h),za=da(h,N);if(za>ua){D.top=ua;D.height=za-ua;D.left+=2;D.width-=5;if(n.isFunction(y)){if(h=y(h,N)){D.position="absolute";D.zIndex=8;xa=n(h).css(D).appendTo(J)}}else{D.isStart=true;D.isEnd=true;xa=n(p({title:"",start:h,end:N,className:["fc-select-helper"],editable:false},D));xa.css("opacity",i("dragOpacity"))}if(xa){u(xa);J.append(xa);Va(xa,D.width,true);Eb(xa,D.height,true)}}}}else ra(h,
N)}function T(){z();if(xa){xa.remove();xa=null}}function d(h){if(h.which==1&&i("selectable")){X(h);var N;Ra.start(function(y,D){T();if(y&&y.col==D.col&&!qa(y)){D=na(D);y=na(y);N=[D,ya(M(D),i("slotMinutes")),y,ya(M(y),i("slotMinutes"))].sort(Gb);Y(N[0],N[3])}else N=null},h);n(document).one("mouseup",function(y){Ra.stop();if(N){+N[0]==+N[1]&&H(N[0],false,y);l(N[0],N[3],false,y)}})}}function H(h,N,y){F("dayClick",L[S(h.getDay())],h,N,y)}function x(h,N){Ra.start(function(y){z();if(y)if(qa(y))ha(y.row,
y.col,y.row,y.col);else{y=na(y);var D=ya(M(y),i("defaultEventMinutes"));ra(y,D)}},N)}function $(h,N,y){var D=Ra.stop();z();D&&F("drop",h,na(D),qa(D),N,y)}var C=this;C.renderAgenda=c;C.setWidth=t;C.setHeight=j;C.beforeHide=R;C.afterShow=P;C.defaultEventEnd=I;C.timePosition=da;C.dayOfWeekCol=S;C.dateCell=ea;C.cellDate=na;C.cellIsAllDay=qa;C.allDayRow=sa;C.allDayBounds=la;C.getHoverListener=function(){return Ra};C.colContentLeft=ta;C.colContentRight=ia;C.getDaySegmentContainer=function(){return ja};
C.getSlotSegmentContainer=function(){return Q};C.getMinMinute=function(){return La};C.getMaxMinute=function(){return bb};C.getBodyContent=function(){return J};C.getRowCnt=function(){return 1};C.getColCnt=function(){return Ba};C.getColWidth=function(){return db};C.getSlotHeight=function(){return Xa};C.defaultSelectionEnd=o;C.renderDayOverlay=oa;C.renderSelection=V;C.clearSelection=T;C.reportDayClick=H;C.dragStart=x;C.dragStop=$;Kb.call(C,a,b,e);Lb.call(C);Mb.call(C);sc.call(C);var i=C.opt,F=C.trigger,
O=C.clearEvents,B=C.renderOverlay,z=C.clearOverlays,l=C.reportSelection,X=C.unselect,W=C.daySelectionMousedown,p=C.slotSegHtml,s=b.formatDate,v,G,r,K,L,k,E,Z,ka,ja,ma,aa,w,J,Q,U,fa,ba,wa,xa,Ga,Wb,Ma,db,vb,Xa,Xb,Ba,tb,Na,Ra,cb,ub={},Wa,Tb,Sb,Ub,Ha,Ia,La,bb,Vb;qb(a.addClass("fc-agenda"));Na=new Nb(function(h,N){function y(eb){return Math.max(Ea,Math.min(tc,eb))}var D,ua,za;r.each(function(eb,uc){D=n(uc);ua=D.offset().left;if(eb)za[1]=ua;za=[ua];N[eb]=za});za[1]=ua+D.outerWidth();if(i("allDaySlot")){D=
aa;ua=D.offset().top;h[0]=[ua,ua+D.outerHeight()]}for(var Da=J.offset().top,Ea=w.offset().top,tc=Ea+w.outerHeight(),fb=0;fb<tb;fb++)h.push([y(Da+Xa*fb),y(Da+Xa*(fb+1))])});Ra=new Ob(Na);cb=new Pb(function(h){return k.eq(h)})}function sc(){function a(p,s){ta(p);var v,G=p.length,r=[],K=[];for(v=0;v<G;v++)p[v].allDay?r.push(p[v]):K.push(p[v]);if(u("allDaySlot")){V(e(r),s);na()}g(c(K),s)}function b(){ia();va().empty();qa().empty()}function e(p){p=ob(nb(p,n.map(p,Ua),q.visStart,q.visEnd));var s,v=p.length,
G,r,K,L=[];for(s=0;s<v;s++){G=p[s];for(r=0;r<G.length;r++){K=G[r];K.row=0;K.level=s;L.push(K)}}return L}function c(p){var s=T(),v=la(),G=da(),r=ya(M(q.visStart),v),K=n.map(p,f),L,k,E,Z,ka,ja,ma=[];for(L=0;L<s;L++){k=ob(nb(p,K,r,ya(M(r),G-v)));vc(k);for(E=0;E<k.length;E++){Z=k[E];for(ka=0;ka<Z.length;ka++){ja=Z[ka];ja.col=L;ja.level=E;ma.push(ja)}}ca(r,1,true)}return ma}function f(p){return p.end?M(p.end):ya(M(p.start),u("defaultEventMinutes"))}function g(p,s){var v,G=p.length,r,K,L,k,E,Z,ka,ja,ma,
aa="",w,J,Q={},U={},fa=qa(),ba;v=T();if(w=u("isRTL")){J=-1;ba=v-1}else{J=1;ba=0}for(v=0;v<G;v++){r=p[v];K=r.event;L=sa(r.start,r.start);k=sa(r.start,r.end);E=r.col;Z=r.level;ka=r.forward||0;ja=I(E*J+ba);ma=o(E*J+ba)-ja;ma=Math.min(ma-6,ma*0.95);E=Z?ma/(Z+ka+1):ka?(ma/(ka+1)-6)*2:ma;Z=ja+ma/(Z+ka+1)*Z*J+(w?ma-E:0);r.top=L;r.left=Z;r.outerWidth=E;r.outerHeight=k-L;aa+=m(K,r)}fa[0].innerHTML=aa;w=fa.children();for(v=0;v<G;v++){r=p[v];K=r.event;aa=n(w[v]);J=ga("eventRender",K,K,aa);if(J===false)aa.remove();
else{if(J&&J!==true){aa.remove();aa=n(J).css({position:"absolute",top:r.top,left:r.left}).appendTo(fa)}r.element=aa;if(K._id===s)t(K,aa,r);else aa[0]._fci=v;$(K,aa)}}Db(fa,p,t);for(v=0;v<G;v++){r=p[v];if(aa=r.element){K=Q[s=r.key=Ib(aa[0])];r.vsides=K===pa?(Q[s]=Sa(aa,true)):K;K=U[s];r.hsides=K===pa?(U[s]=pb(aa,true)):K;s=aa.find("div.fc-event-content");if(s.length)r.contentTop=s[0].offsetTop}}for(v=0;v<G;v++){r=p[v];if(aa=r.element){aa[0].style.width=Math.max(0,r.outerWidth-r.hsides)+"px";Q=Math.max(0,
r.outerHeight-r.vsides);aa[0].style.height=Q+"px";K=r.event;if(r.contentTop!==pa&&Q-r.contentTop<10){aa.find("div.fc-event-time").text(X(K.start,u("timeFormat"))+" - "+K.title);aa.find("div.fc-event-title").remove()}ga("eventAfterRender",K,K,aa)}}}function m(p,s){var v="<",G=p.url,r=Jb(p,u),K=r?" style='"+r+"'":"",L=["fc-event","fc-event-skin","fc-event-vert"];oa(p)&&L.push("fc-event-draggable");s.isStart&&L.push("fc-corner-top");s.isEnd&&L.push("fc-corner-bottom");L=L.concat(p.className);if(p.source)L=
L.concat(p.source.className||[]);v+=G?"a href='"+Qa(p.url)+"'":"div";v+=" class='"+L.join(" ")+"' style='position:absolute;z-index:8;top:"+s.top+"px;left:"+s.left+"px;"+r+"'><div class='fc-event-inner fc-event-skin'"+K+"><div class='fc-event-head fc-event-skin'"+K+"><div class='fc-event-time'>"+Qa(W(p.start,p.end,u("timeFormat")))+"</div></div><div class='fc-event-content'><div class='fc-event-title'>"+Qa(p.title)+"</div></div><div class='fc-event-bg'></div></div>";if(s.isEnd&&ha(p))v+="<div class='ui-resizable-handle ui-resizable-s'>=</div>";
v+="</"+(G?"a":"div")+">";return v}function j(p,s,v){oa(p)&&A(p,s,v.isStart);v.isEnd&&ha(p)&&Y(p,s,v);ea(p,s)}function t(p,s,v){var G=s.find("div.fc-event-time");oa(p)&&R(p,s,G);v.isEnd&&ha(p)&&P(p,s,G);ea(p,s)}function A(p,s,v){function G(){if(!L){s.width(r).height("").draggable("option","grid",null);L=true}}var r,K,L=true,k,E=u("isRTL")?-1:1,Z=S(),ka=d(),ja=H(),ma=la();s.draggable({zIndex:9,opacity:u("dragOpacity","month"),revertDuration:u("dragRevertDuration"),start:function(aa,w){ga("eventDragStart",
s,p,aa,w);i(p,s);r=s.width();Z.start(function(J,Q,U,fa){z();if(J){K=false;k=fa*E;if(J.row)if(v){if(L){s.width(ka-10);Eb(s,ja*Math.round((p.end?(p.end-p.start)/wc:u("defaultEventMinutes"))/u("slotMinutes")));s.draggable("option","grid",[ka,1]);L=false}}else K=true;else{B(ca(M(p.start),k),ca(Ua(p),k));G()}K=K||L&&!k}else{G();K=true}s.draggable("option","revert",K)},aa,"drag")},stop:function(aa,w){Z.stop();z();ga("eventDragStop",s,p,aa,w);if(K){G();s.css("filter","");C(p,s)}else{var J=0;L||(J=Math.round((s.offset().top-
x().offset().top)/ja)*u("slotMinutes")+ma-(p.start.getHours()*60+p.start.getMinutes()));F(this,p,k,J,L,aa,w)}}})}function R(p,s,v){function G(J){var Q=ya(M(p.start),J),U;if(p.end)U=ya(M(p.end),J);v.text(W(Q,U,u("timeFormat")))}function r(){if(L){v.css("display","");s.draggable("option","grid",[aa,w]);L=false}}var K,L=false,k,E,Z,ka=u("isRTL")?-1:1,ja=S(),ma=T(),aa=d(),w=H();s.draggable({zIndex:9,scroll:false,grid:[aa,w],axis:ma==1?"y":false,opacity:u("dragOpacity"),revertDuration:u("dragRevertDuration"),
start:function(J,Q){ga("eventDragStart",s,p,J,Q);i(p,s);K=s.position();E=Z=0;ja.start(function(U,fa,ba,wa){s.draggable("option","revert",!U);z();if(U){k=wa*ka;if(u("allDaySlot")&&!U.row){if(!L){L=true;v.hide();s.draggable("option","grid",null)}B(ca(M(p.start),k),ca(Ua(p),k))}else r()}},J,"drag")},drag:function(J,Q){E=Math.round((Q.position.top-K.top)/w)*u("slotMinutes");if(E!=Z){L||G(E);Z=E}},stop:function(J,Q){var U=ja.stop();z();ga("eventDragStop",s,p,J,Q);if(U&&(k||E||L))F(this,p,k,L?0:E,L,J,Q);
else{r();s.css("filter","");s.css(K);G(0);C(p,s)}}})}function P(p,s,v){var G,r,K=H();s.resizable({handles:{s:"div.ui-resizable-s"},grid:K,start:function(L,k){G=r=0;i(p,s);s.css("z-index",9);ga("eventResizeStart",this,p,L,k)},resize:function(L,k){G=Math.round((Math.max(K,s.height())-k.originalSize.height)/K);if(G!=r){v.text(W(p.start,!G&&!p.end?null:ya(ra(p),u("slotMinutes")*G),u("timeFormat")));r=G}},stop:function(L,k){ga("eventResizeStop",this,p,L,k);if(G)O(this,p,0,u("slotMinutes")*G,L,k);else{s.css("z-index",
8);C(p,s)}}})}var q=this;q.renderEvents=a;q.compileDaySegs=e;q.clearEvents=b;q.slotSegHtml=m;q.bindDaySeg=j;Qb.call(q);var u=q.opt,ga=q.trigger,oa=q.isEventDraggable,ha=q.isEventResizable,ra=q.eventEnd,ta=q.reportEvents,ia=q.reportEventClear,ea=q.eventElementHandlers,na=q.setHeight,va=q.getDaySegmentContainer,qa=q.getSlotSegmentContainer,S=q.getHoverListener,da=q.getMaxMinute,la=q.getMinMinute,sa=q.timePosition,I=q.colContentLeft,o=q.colContentRight,V=q.renderDaySegs,Y=q.resizableDayEvent,T=q.getColCnt,
d=q.getColWidth,H=q.getSlotHeight,x=q.getBodyContent,$=q.reportEventElement,C=q.showEvents,i=q.hideEvents,F=q.eventDrop,O=q.eventResize,B=q.renderDayOverlay,z=q.clearOverlays,l=q.calendar,X=l.formatDate,W=l.formatDates}function vc(a){var b,e,c,f,g,m;for(b=a.length-1;b>0;b--){f=a[b];for(e=0;e<f.length;e++){g=f[e];for(c=0;c<a[b-1].length;c++){m=a[b-1][c];if(Cb(g,m))m.forward=Math.max(m.forward||0,(g.forward||0)+1)}}}}function Kb(a,b,e){function c(I,o){I=sa[I];if(typeof I=="object")return jb(I,o||e);
return I}function f(I,o){return b.trigger.apply(b,[I,o||ea].concat(Array.prototype.slice.call(arguments,2),[ea]))}function g(I){return j(I)&&!c("disableDragging")}function m(I){return j(I)&&!c("disableResizing")}function j(I){return Ta(I.editable,(I.source||{}).editable,c("editable"))}function t(I){S={};var o,V=I.length,Y;for(o=0;o<V;o++){Y=I[o];if(S[Y._id])S[Y._id].push(Y);else S[Y._id]=[Y]}}function A(I){return I.end?M(I.end):na(I)}function R(I,o){da.push(o);if(la[I._id])la[I._id].push(o);else la[I._id]=
[o]}function P(){da=[];la={}}function q(I,o){o.click(function(V){if(!o.hasClass("ui-draggable-dragging")&&!o.hasClass("ui-resizable-resizing"))return f("eventClick",this,I,V)}).hover(function(V){f("eventMouseover",this,I,V)},function(V){f("eventMouseout",this,I,V)})}function u(I,o){oa(I,o,"show")}function ga(I,o){oa(I,o,"hide")}function oa(I,o,V){I=la[I._id];var Y,T=I.length;for(Y=0;Y<T;Y++)if(!o||I[Y][0]!=o[0])I[Y][V]()}function ha(I,o,V,Y,T,d,H){var x=o.allDay,$=o._id;ta(S[$],V,Y,T);f("eventDrop",
I,o,V,Y,T,function(){ta(S[$],-V,-Y,x);qa($)},d,H);qa($)}function ra(I,o,V,Y,T,d){var H=o._id;ia(S[H],V,Y);f("eventResize",I,o,V,Y,function(){ia(S[H],-V,-Y);qa(H)},T,d);qa(H)}function ta(I,o,V,Y){V=V||0;for(var T,d=I.length,H=0;H<d;H++){T=I[H];if(Y!==pa)T.allDay=Y;ya(ca(T.start,o,true),V);if(T.end)T.end=ya(ca(T.end,o,true),V);va(T,sa)}}function ia(I,o,V){V=V||0;for(var Y,T=I.length,d=0;d<T;d++){Y=I[d];Y.end=ya(ca(A(Y),o,true),V);va(Y,sa)}}var ea=this;ea.element=a;ea.calendar=b;ea.name=e;ea.opt=c;ea.trigger=
f;ea.isEventDraggable=g;ea.isEventResizable=m;ea.reportEvents=t;ea.eventEnd=A;ea.reportEventElement=R;ea.reportEventClear=P;ea.eventElementHandlers=q;ea.showEvents=u;ea.hideEvents=ga;ea.eventDrop=ha;ea.eventResize=ra;var na=ea.defaultEventEnd,va=b.normalizeEvent,qa=b.reportEventChange,S={},da=[],la={},sa=b.options}function Qb(){function a(i,F){var O=T(),B=qa(),z=S(),l=0,X,W,p=i.length,s,v;O[0].innerHTML=e(i);c(i,O.children());f(i);g(i,O,F);m(i);j(i);t(i);F=A();for(O=0;O<B;O++){X=[];for(W=0;W<z;W++)X[W]=
0;for(;l<p&&(s=i[l]).row==O;){W=Hb(X.slice(s.startCol,s.endCol));s.top=W;W+=s.outerHeight;for(v=s.startCol;v<s.endCol;v++)X[v]=W;l++}F[O].height(Hb(X))}P(i,R(F))}function b(i,F,O){var B=n("<div/>"),z=T(),l=i.length,X;B[0].innerHTML=e(i);B=B.children();z.append(B);c(i,B);m(i);j(i);t(i);P(i,R(A()));B=[];for(z=0;z<l;z++)if(X=i[z].element){i[z].row===F&&X.css("top",O);B.push(X[0])}return n(B)}function e(i){var F=ga("isRTL"),O,B=i.length,z,l,X,W;O=la();var p=O.left,s=O.right,v,G,r,K,L,k="";for(O=0;O<B;O++){z=
i[O];l=z.event;W=["fc-event","fc-event-skin","fc-event-hori"];ha(l)&&W.push("fc-event-draggable");if(F){z.isStart&&W.push("fc-corner-right");z.isEnd&&W.push("fc-corner-left");v=o(z.end.getDay()-1);G=o(z.start.getDay());r=z.isEnd?sa(v):p;K=z.isStart?I(G):s}else{z.isStart&&W.push("fc-corner-left");z.isEnd&&W.push("fc-corner-right");v=o(z.start.getDay());G=o(z.end.getDay()-1);r=z.isStart?sa(v):p;K=z.isEnd?I(G):s}W=W.concat(l.className);if(l.source)W=W.concat(l.source.className||[]);X=l.url;L=Jb(l,ga);
k+=X?"<a href='"+Qa(X)+"'":"<div";k+=" class='"+W.join(" ")+"' style='position:absolute;z-index:8;left:"+r+"px;"+L+"'><div class='fc-event-inner fc-event-skin'"+(L?" style='"+L+"'":"")+">";if(!l.allDay&&z.isStart)k+="<span class='fc-event-time'>"+Qa(H(l.start,l.end,ga("timeFormat")))+"</span>";k+="<span class='fc-event-title'>"+Qa(l.title)+"</span></div>";if(z.isEnd&&ra(l))k+="<div class='ui-resizable-handle ui-resizable-"+(F?"w":"e")+"'>&nbsp;&nbsp;&nbsp;</div>";k+="</"+(X?"a":"div")+">";z.left=
r;z.outerWidth=K-r;z.startCol=v;z.endCol=G+1}return k}function c(i,F){var O,B=i.length,z,l,X;for(O=0;O<B;O++){z=i[O];l=z.event;X=n(F[O]);l=oa("eventRender",l,l,X);if(l===false)X.remove();else{if(l&&l!==true){l=n(l).css({position:"absolute",left:z.left});X.replaceWith(l);X=l}z.element=X}}}function f(i){var F,O=i.length,B,z;for(F=0;F<O;F++){B=i[F];(z=B.element)&&ia(B.event,z)}}function g(i,F,O){var B,z=i.length,l,X,W;for(B=0;B<z;B++){l=i[B];if(X=l.element){W=l.event;if(W._id===O)d(W,X,l);else X[0]._fci=
B}}Db(F,i,d)}function m(i){var F,O=i.length,B,z,l,X,W={};for(F=0;F<O;F++){B=i[F];if(z=B.element){l=B.key=Ib(z[0]);X=W[l];if(X===pa)X=W[l]=pb(z,true);B.hsides=X}}}function j(i){var F,O=i.length,B,z;for(F=0;F<O;F++){B=i[F];if(z=B.element)z[0].style.width=Math.max(0,B.outerWidth-B.hsides)+"px"}}function t(i){var F,O=i.length,B,z,l,X,W={};for(F=0;F<O;F++){B=i[F];if(z=B.element){l=B.key;X=W[l];if(X===pa)X=W[l]=Fb(z);B.outerHeight=z[0].offsetHeight+X}}}function A(){var i,F=qa(),O=[];for(i=0;i<F;i++)O[i]=
da(i).find("td:first div.fc-day-content > div");return O}function R(i){var F,O=i.length,B=[];for(F=0;F<O;F++)B[F]=i[F][0].offsetTop;return B}function P(i,F){var O,B=i.length,z,l;for(O=0;O<B;O++){z=i[O];if(l=z.element){l[0].style.top=F[z.row]+(z.top||0)+"px";z=z.event;oa("eventAfterRender",z,z,l)}}}function q(i,F,O){var B=ga("isRTL"),z=B?"w":"e",l=F.find("div.ui-resizable-"+z),X=false;qb(F);F.mousedown(function(W){W.preventDefault()}).click(function(W){if(X){W.preventDefault();W.stopImmediatePropagation()}});
l.mousedown(function(W){function p(ja){oa("eventResizeStop",this,i,ja);n("body").css("cursor","");s.stop();$();k&&va(this,i,k,0,ja);setTimeout(function(){X=false},0)}if(W.which==1){X=true;var s=u.getHoverListener(),v=qa(),G=S(),r=B?-1:1,K=B?G-1:0,L=F.css("top"),k,E,Z=n.extend({},i),ka=V(i.start);C();n("body").css("cursor",z+"-resize").one("mouseup",p);oa("eventResizeStart",this,i,W);s.start(function(ja,ma){if(ja){var aa=Math.max(ka.row,ja.row);ja=ja.col;if(v==1)aa=0;if(aa==ka.row)ja=B?Math.min(ka.col,
ja):Math.max(ka.col,ja);k=aa*7+ja*r+K-(ma.row*7+ma.col*r+K);ma=ca(ta(i),k,true);if(k){Z.end=ma;aa=E;E=b(Y([Z]),O.row,L);E.find("*").css("cursor",z+"-resize");aa&&aa.remove();na(i)}else if(E){ea(i);E.remove();E=null}$();x(i.start,ca(M(ma),1))}},W)}})}var u=this;u.renderDaySegs=a;u.resizableDayEvent=q;var ga=u.opt,oa=u.trigger,ha=u.isEventDraggable,ra=u.isEventResizable,ta=u.eventEnd,ia=u.reportEventElement,ea=u.showEvents,na=u.hideEvents,va=u.eventResize,qa=u.getRowCnt,S=u.getColCnt,da=u.allDayRow,
la=u.allDayBounds,sa=u.colContentLeft,I=u.colContentRight,o=u.dayOfWeekCol,V=u.dateCell,Y=u.compileDaySegs,T=u.getDaySegmentContainer,d=u.bindDaySeg,H=u.calendar.formatDates,x=u.renderDayOverlay,$=u.clearOverlays,C=u.clearSelection}function Mb(){function a(P,q,u){b();q||(q=j(P,u));t(P,q,u);e(P,q,u)}function b(P){if(R){R=false;A();m("unselect",null,P)}}function e(P,q,u,ga){R=true;m("select",null,P,q,u,ga)}function c(P){var q=f.cellDate,u=f.cellIsAllDay,ga=f.getHoverListener(),oa=f.reportDayClick;if(P.which==
1&&g("selectable")){b(P);var ha;ga.start(function(ra,ta){A();if(ra&&u(ra)){ha=[q(ta),q(ra)].sort(Gb);t(ha[0],ha[1],true)}else ha=null},P);n(document).one("mouseup",function(ra){ga.stop();if(ha){+ha[0]==+ha[1]&&oa(ha[0],true,ra);e(ha[0],ha[1],true,ra)}})}}var f=this;f.select=a;f.unselect=b;f.reportSelection=e;f.daySelectionMousedown=c;var g=f.opt,m=f.trigger,j=f.defaultSelectionEnd,t=f.renderSelection,A=f.clearSelection,R=false;g("selectable")&&g("unselectAuto")&&n(document).mousedown(function(P){var q=
g("unselectCancel");if(q)if(n(P.target).parents(q).length)return;b(P)})}function Lb(){function a(g,m){var j=f.shift();j||(j=n("<div class='fc-cell-overlay' style='position:absolute;z-index:3'/>"));j[0].parentNode!=m[0]&&j.appendTo(m);c.push(j.css(g).show());return j}function b(){for(var g;g=c.shift();)f.push(g.hide().unbind())}var e=this;e.renderOverlay=a;e.clearOverlays=b;var c=[],f=[]}function Nb(a){var b=this,e,c;b.build=function(){e=[];c=[];a(e,c)};b.cell=function(f,g){var m=e.length,j=c.length,
t,A=-1,R=-1;for(t=0;t<m;t++)if(g>=e[t][0]&&g<e[t][1]){A=t;break}for(t=0;t<j;t++)if(f>=c[t][0]&&f<c[t][1]){R=t;break}return A>=0&&R>=0?{row:A,col:R}:null};b.rect=function(f,g,m,j,t){t=t.offset();return{top:e[f][0]-t.top,left:c[g][0]-t.left,width:c[j][1]-c[g][0],height:e[m][1]-e[f][0]}}}function Ob(a){function b(j){j=a.cell(j.pageX,j.pageY);if(!j!=!m||j&&(j.row!=m.row||j.col!=m.col)){if(j){g||(g=j);f(j,g,j.row-g.row,j.col-g.col)}else f(j,g);m=j}}var e=this,c,f,g,m;e.start=function(j,t,A){f=j;g=m=null;
a.build();b(t);c=A||"mousemove";n(document).bind(c,b)};e.stop=function(){n(document).unbind(c,b);return m}}function Pb(a){function b(m){return c[m]=c[m]||a(m)}var e=this,c={},f={},g={};e.left=function(m){return f[m]=f[m]===pa?b(m).position().left:f[m]};e.right=function(m){return g[m]=g[m]===pa?e.left(m)+b(m).width():g[m]};e.clear=function(){c={};f={};g={}}}var Ya={defaultView:"month",aspectRatio:1.35,header:{left:"title",center:"",right:"today prev,next"},weekends:true,allDayDefault:true,ignoreTimezone:true,
lazyFetching:true,startParam:"start",endParam:"end",titleFormat:{month:"MMMM yyyy",week:"MMM d[ yyyy]{ '&#8212;'[ MMM] d yyyy}",day:"dddd, MMM d, yyyy"},columnFormat:{month:"ddd",week:"ddd M/d",day:"dddd M/d"},timeFormat:{"":"h(:mm)t"},isRTL:false,firstDay:0,monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday",
"Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],buttonText:{prev:"&nbsp;&#9668;&nbsp;",next:"&nbsp;&#9658;&nbsp;",prevYear:"&nbsp;&lt;&lt;&nbsp;",nextYear:"&nbsp;&gt;&gt;&nbsp;",today:"today",month:"month",week:"week",day:"day"},theme:false,buttonIcons:{prev:"circle-triangle-w",next:"circle-triangle-e"},unselectAuto:true,dropAccept:"*"},xc={header:{left:"next,prev today",center:"",right:"title"},buttonText:{prev:"&nbsp;&#9658;&nbsp;",next:"&nbsp;&#9668;&nbsp;",
prevYear:"&nbsp;&gt;&gt;&nbsp;",nextYear:"&nbsp;&lt;&lt;&nbsp;"},buttonIcons:{prev:"circle-triangle-e",next:"circle-triangle-w"}},Aa=n.fullCalendar={version:"1.5.2"},Ja=Aa.views={};n.fn.fullCalendar=function(a){if(typeof a=="string"){var b=Array.prototype.slice.call(arguments,1),e;this.each(function(){var f=n.data(this,"fullCalendar");if(f&&n.isFunction(f[a])){f=f[a].apply(f,b);if(e===pa)e=f;a=="destroy"&&n.removeData(this,"fullCalendar")}});if(e!==pa)return e;return this}var c=a.eventSources||[];
delete a.eventSources;if(a.events){c.push(a.events);delete a.events}a=n.extend(true,{},Ya,a.isRTL||a.isRTL===pa&&Ya.isRTL?xc:{},a);this.each(function(f,g){f=n(g);g=new Yb(f,a,c);f.data("fullCalendar",g);g.render()});return this};Aa.sourceNormalizers=[];Aa.sourceFetchers=[];var ac={dataType:"json",cache:false},bc=1;Aa.addDays=ca;Aa.cloneDate=M;Aa.parseDate=kb;Aa.parseISO8601=Bb;Aa.parseTime=mb;Aa.formatDate=Oa;Aa.formatDates=ib;var lc=["sun","mon","tue","wed","thu","fri","sat"],Ab=864E5,cc=36E5,wc=
6E4,dc={s:function(a){return a.getSeconds()},ss:function(a){return Pa(a.getSeconds())},m:function(a){return a.getMinutes()},mm:function(a){return Pa(a.getMinutes())},h:function(a){return a.getHours()%12||12},hh:function(a){return Pa(a.getHours()%12||12)},H:function(a){return a.getHours()},HH:function(a){return Pa(a.getHours())},d:function(a){return a.getDate()},dd:function(a){return Pa(a.getDate())},ddd:function(a,b){return b.dayNamesShort[a.getDay()]},dddd:function(a,b){return b.dayNames[a.getDay()]},
M:function(a){return a.getMonth()+1},MM:function(a){return Pa(a.getMonth()+1)},MMM:function(a,b){return b.monthNamesShort[a.getMonth()]},MMMM:function(a,b){return b.monthNames[a.getMonth()]},yy:function(a){return(a.getFullYear()+"").substring(2)},yyyy:function(a){return a.getFullYear()},t:function(a){return a.getHours()<12?"a":"p"},tt:function(a){return a.getHours()<12?"am":"pm"},T:function(a){return a.getHours()<12?"A":"P"},TT:function(a){return a.getHours()<12?"AM":"PM"},u:function(a){return Oa(a,
"yyyy-MM-dd'T'HH:mm:ss'Z'")},S:function(a){a=a.getDate();if(a>10&&a<20)return"th";return["st","nd","rd"][a%10-1]||"th"}};Aa.applyAll=$a;Ja.month=mc;Ja.basicWeek=nc;Ja.basicDay=oc;wb({weekMode:"fixed"});Ja.agendaWeek=qc;Ja.agendaDay=rc;wb({allDaySlot:true,allDayText:"all-day",firstHour:6,slotMinutes:30,defaultEventMinutes:120,axisFormat:"h(:mm)tt",timeFormat:{agenda:"h:mm{ - h:mm}"},dragOpacity:{agenda:0.5},minTime:0,maxTime:24})})(jQuery);
/**
 * Copyright (c) 2009 Sergiy Kovalchuk (serg472@gmail.com)
 * 
 * Dual licensed under the MIT (http://www.opensource.org/licenses/mit-license.php)
 * and GPL (http://www.opensource.org/licenses/gpl-license.php) licenses.
 *  
 * Following code is based on Element.mask() implementation from ExtJS framework (http://extjs.com/)
 *
 */
(function(a){a.fn.mask=function(c,b){a(this).each(function(){if(b!==undefined&&b>0){var d=a(this);d.data("_mask_timeout",setTimeout(function(){a.maskElement(d,c)},b))}else{a.maskElement(a(this),c)}})};a.fn.unmask=function(){a(this).each(function(){a.unmaskElement(a(this))})};a.fn.isMasked=function(){return this.hasClass("masked")};a.maskElement=function(d,c){if(d.data("_mask_timeout")!==undefined){clearTimeout(d.data("_mask_timeout"));d.removeData("_mask_timeout")}if(d.isMasked()){a.unmaskElement(d)}if(d.css("position")=="static"){d.addClass("masked-relative")}d.addClass("masked");var e=a('<div class="loadmask"></div>');if(navigator.userAgent.toLowerCase().indexOf("msie")>-1){e.height(d.height()+parseInt(d.css("padding-top"))+parseInt(d.css("padding-bottom")));e.width(d.width()+parseInt(d.css("padding-left"))+parseInt(d.css("padding-right")))}if(navigator.userAgent.toLowerCase().indexOf("msie 6")>-1){d.find("select").addClass("masked-hidden")}d.append(e);if(c!==undefined){var b=a('<div class="loadmask-msg" style="display:none;"></div>');b.append("<div>"+c+"</div>");d.append(b);b.css("top",Math.round(d.height()/2-(b.height()-parseInt(b.css("padding-top"))-parseInt(b.css("padding-bottom")))/2)+"px");b.css("left",Math.round(d.width()/2-(b.width()-parseInt(b.css("padding-left"))-parseInt(b.css("padding-right")))/2)+"px");b.show()}};a.unmaskElement=function(b){if(b.data("_mask_timeout")!==undefined){clearTimeout(b.data("_mask_timeout"));b.removeData("_mask_timeout")}b.find(".loadmask-msg,.loadmask").remove();b.removeClass("masked");b.removeClass("masked-relative");b.find("select").removeClass("masked-hidden")}})(jQuery);(function(a){a.fn.colorPicker=function(){this.length>0&&buildSelector();return this.each(function(){buildPicker(this)})};var c,d=false;buildPicker=function(b){control=a("<div class='color_picker'>&nbsp;</div>");control.css("background-color",a(b).val());control.bind("click",toggleSelector);a(b).after(control);a(b).bind("change",function(){selectedValue=toHex(a(b).val());a(b).next(".color_picker").css("background-color",selectedValue)});a(b).hide()};buildSelector=function(){selector=a("<div id='color_selector'></div>");
a.each(a.fn.colorPicker.defaultColors,function(){swatch=a("<div class='color_swatch'>&nbsp;</div>");swatch.css("background-color","#"+this);swatch.bind("click",function(){changeColor(a(this).css("background-color"))});swatch.bind("mouseover",function(){a(this).css("border-color","#598FEF");a("input#color_value").val(toHex(a(this).css("background-color")))});swatch.bind("mouseout",function(){a(this).css("border-color","#000");a("input#color_value").val(toHex(a(c).css("background-color")))});swatch.appendTo(selector)});
hex_field=a("<label for='color_value'>Hex</label><input type='text' size='8' id='color_value'/>");hex_field.bind("keydown",function(b){b.keyCode==13&&changeColor(a(this).val());b.keyCode==27&&toggleSelector()});a("<div id='color_custom'></div>").append(hex_field).appendTo(selector);a("body").append(selector);selector.hide()};checkMouse=function(b){var e=a(b.target).parents("div#color_selector").length;b.target==a("div#color_selector")[0]||b.target==c||e>0||hideSelector()};hideSelector=function(){var b=
a("div#color_selector");a(document).unbind("mousedown",checkMouse);b.hide();d=false};showSelector=function(){var b=a("div#color_selector");b.css({top:a(c).offset().top+a(c).outerHeight(),left:a(c).offset().left});hexColor=a(c).prev("input").val();a("input#color_value").val(hexColor);b.show();a(document).bind("mousedown",checkMouse);d=true};toggleSelector=function(){c=this;d?hideSelector():showSelector()};changeColor=function(b){if(selectedValue=toHex(b))a(c).css("background-color",selectedValue),
a(c).prev("input").val(selectedValue).change(),hideSelector()};toHex=function(a){if(a.match(/[0-9a-fA-F]{3}$/)||a.match(/[0-9a-fA-F]{6}$/))a=a.charAt(0)=="#"?a:"#"+a;else if(a.match(/^rgb\(([0-9]|[1-9][0-9]|[1][0-9]{2}|[2][0-4][0-9]|[2][5][0-5]),[ ]{0,1}([0-9]|[1-9][0-9]|[1][0-9]{2}|[2][0-4][0-9]|[2][5][0-5]),[ ]{0,1}([0-9]|[1-9][0-9]|[1][0-9]{2}|[2][0-4][0-9]|[2][5][0-5])\)$/)){var c=[parseInt(RegExp.$1),parseInt(RegExp.$2),parseInt(RegExp.$3)],d=function(a){if(a.length<2)for(var b=0,c=2-a.length;b<
c;b++)a="0"+a;return a};if(c.length==3)var a=d(c[0].toString(16)),f=d(c[1].toString(16)),c=d(c[2].toString(16)),a="#"+a+f+c}else a=false;return a};a.fn.colorPicker.addColors=function(b){a.fn.colorPicker.defaultColors=a.fn.colorPicker.defaultColors.concat(b)};a.fn.colorPicker.defaultColors="000000,993300,333300,000080,333399,333333,800000,FF6600,808000,008000,008080,0000FF,666699,808080,FF0000,FF9900,99CC00,339966,33CCCC,3366FF,800080,999999,FF00FF,FFCC00,FFFF00,00FF00,00FFFF,00CCFF,993366,C0C0C0,FF99CC,FFCC99,FFFF99,CCFFFF,99CCFF,FFFFFF".split(",")})(jQuery);
(function(b){b.widget("ui.tagit",{options:{itemName:"item",fieldName:"tags",availableTags:[],tagSource:null,removeConfirmation:false,caseSensitive:true,allowSpaces:false,singleField:false,singleFieldDelimiter:",",singleFieldNode:null,tabIndex:null,onTagAdded:null,onTagRemoved:null,onTagClicked:null},_create:function(){var a=this;this.element.is("input")?(this.tagList=b("<ul></ul>").insertAfter(this.element),this.options.singleField=true,this.options.singleFieldNode=this.element,this.element.css("display",
"none")):this.tagList=this.element.find("ul, ol").andSelf().last();this._tagInput=b('<input type="text">').addClass("ui-widget-content");this.options.tabIndex&&this._tagInput.attr("tabindex",this.options.tabIndex);this.options.tagSource=this.options.tagSource||function(e,c){var d=e.term.toLowerCase(),g=b.grep(a.options.availableTags,function(a){return a.toLowerCase().indexOf(d)===0});c(a._subtractArray(g,a.assignedTags()))};this.tagList.addClass("tagit").addClass("ui-widget ui-widget-content ui-corner-all").append(b('<li class="tagit-new"></li>').append(this._tagInput)).click(function(e){var c=
b(e.target);c.hasClass("tagit-label")?a._trigger("onTagClicked",e,c.closest(".tagit-choice")):a._tagInput.focus()});this.tagList.children("li").each(function(){b(this).hasClass("tagit-new")||(a.createTag(b(this).html(),b(this).attr("class")),b(this).remove())});if(this.options.singleField)if(this.options.singleFieldNode){var c=b(this.options.singleFieldNode),d=c.val().split(this.options.singleFieldDelimiter);c.val("");b.each(d,function(b,c){a.createTag(c)})}else this.options.singleFieldNode=this.tagList.after('<input type="hidden" style="display:none;" value="" name="'+
this.options.fieldName+'">');this._tagInput.keydown(function(c){if(c.which==b.ui.keyCode.BACKSPACE&&a._tagInput.val()===""){var d=a._lastTag();!a.options.removeConfirmation||d.hasClass("remove")?a.removeTag(d):a.options.removeConfirmation&&d.addClass("remove ui-state-highlight")}else a.options.removeConfirmation&&a._lastTag().removeClass("remove ui-state-highlight");if(c.which==b.ui.keyCode.COMMA||c.which==b.ui.keyCode.ENTER||c.which==b.ui.keyCode.TAB&&a._tagInput.val()!==""||c.which==b.ui.keyCode.SPACE&&
a.options.allowSpaces!==true&&(b.trim(a._tagInput.val()).replace(/^s*/,"").charAt(0)!='"'||b.trim(a._tagInput.val()).charAt(0)=='"'&&b.trim(a._tagInput.val()).charAt(b.trim(a._tagInput.val()).length-1)=='"'&&b.trim(a._tagInput.val()).length-1!==0))c.preventDefault(),a.createTag(a._cleanedInput()),a._tagInput.autocomplete("close")}).blur(function(){a.createTag(a._cleanedInput())});(this.options.availableTags||this.options.tagSource)&&this._tagInput.autocomplete({source:this.options.tagSource,select:function(b,
c){a._tagInput.val()===""&&a.removeTag(a._lastTag(),false);a.createTag(c.item.value);return false}})},_cleanedInput:function(){return b.trim(this._tagInput.val().replace(/^"(.*)"$/,"$1"))},_lastTag:function(){return this.tagList.children(".tagit-choice:last")},assignedTags:function(){var a=this,c=[];this.options.singleField?(c=b(this.options.singleFieldNode).val().split(this.options.singleFieldDelimiter),c[0]===""&&(c=[])):this.tagList.children(".tagit-choice").each(function(){c.push(a.tagLabel(this))});
return c},_updateSingleTagsField:function(a){b(this.options.singleFieldNode).val(a.join(this.options.singleFieldDelimiter))},_subtractArray:function(a,c){for(var d=[],e=0;e<a.length;e++)b.inArray(a[e],c)==-1&&d.push(a[e]);return d},tagLabel:function(a){return this.options.singleField?b(a).children(".tagit-label").text():b(a).children("input").val()},_isNew:function(a){var b=this,d=true;this.tagList.children(".tagit-choice").each(function(){if(b._formatStr(a)==b._formatStr(b.tagLabel(this)))return d=
false});return d},_formatStr:function(a){return this.options.caseSensitive?a:b.trim(a.toLowerCase())},createTag:function(a,c){that=this;a=b.trim(a);if(!this._isNew(a)||a==="")return false;var d=b(this.options.onTagClicked?'<a class="tagit-label"></a>':'<span class="tagit-label"></span>').text(a),e=b("<li></li>").addClass("tagit-choice ui-widget-content ui-state-default ui-corner-all").addClass(c).append(d),f=b("<span></span>").addClass("ui-icon ui-icon-close"),f=b('<a><span class="text-icon">\u00d7</span></a>').addClass("close").append(f).click(function(){that.removeTag(e)});
e.append(f);this.options.singleField?(d=this.assignedTags(),d.push(a),this._updateSingleTagsField(d)):(d=d.html(),e.append('<input type="hidden" style="display:none;" value="'+d+'" name="'+this.options.itemName+"["+this.options.fieldName+'][]">'));this._trigger("onTagAdded",null,e);this._tagInput.val("");this._tagInput.parent().before(e)},removeTag:function(a,c){typeof c==="undefined"&&(c=true);a=b(a);this._trigger("onTagRemoved",null,a);if(this.options.singleField){var d=this.assignedTags(),e=this.tagLabel(a),
d=b.grep(d,function(a){return a!=e});this._updateSingleTagsField(d)}c?a.fadeOut("fast").hide("blind",{direction:"horizontal"},"fast",function(){a.remove()}).dequeue():a.remove()},removeAll:function(){var a=this;this.tagList.children(".tagit-choice").each(function(b,d){a.removeTag(d,false)})}})})(jQuery);
(function(c,F,K){function P(){P.history=P.history||[];P.history.push(arguments);if("object"===typeof console){var b=console[console.warn?"warn":"log"],a=Array.prototype.slice.call(arguments);typeof arguments[0]==="string"&&(a[0]="qTip2: "+a[0]);b.apply?b.apply(console,a):b(a)}}function R(b){var a;if(!b||"object"!==typeof b)return h;if("object"!==typeof b.metadata)b.metadata={type:b.metadata};if("content"in b){if("object"!==typeof b.content||b.content.jquery)b.content={text:b.content};a=b.content.text||
h;if(!c.isFunction(a)&&(!a&&!a.attr||a.length<1||"object"===typeof a&&!a.jquery))b.content.text=h;if("title"in b.content){if("object"!==typeof b.content.title)b.content.title={text:b.content.title};a=b.content.title.text||h;if(!c.isFunction(a)&&(!a&&!a.attr||a.length<1||"object"===typeof a&&!a.jquery))b.content.title.text=h}}if("position"in b&&"object"!==typeof b.position)b.position={my:b.position,at:b.position};if("show"in b&&"object"!==typeof b.show)b.show=b.show.jquery?{target:b.show}:{event:b.show};
if("hide"in b&&"object"!==typeof b.hide)b.hide=b.hide.jquery?{target:b.hide}:{event:b.hide};if("style"in b&&"object"!==typeof b.style)b.style={classes:b.style};c.each(m,function(){this.sanitize&&this.sanitize(b)});return b}function W(b,a,f,e){function o(k){for(var b=0,c,d=a,k=k.split(".");d=d[k[b++]];)b<k.length&&(c=d);return[c||a,k.pop()]}function l(){var k=a.style.widget;j.toggleClass(T,k).toggleClass(V,!k);u.content.toggleClass(T+"-content",k);u.titlebar&&u.titlebar.toggleClass(T+"-header",k);
u.button&&u.button.toggleClass(C+"-icon",!k)}function y(a){if(u.title)u.titlebar.remove(),u.titlebar=u.title=u.button=v,a!==h&&d.reposition()}function i(){var k=a.content.title.button,b=typeof k==="string"?k:"Close tooltip";u.button&&u.button.remove();u.button=k.jquery?k:c("<a />",{"class":"ui-state-default "+(a.style.widget?"":C+"-icon"),title:b,"aria-label":b}).prepend(c("<span />",{"class":"ui-icon ui-icon-close",html:"&times;"}));u.button.appendTo(u.titlebar).attr("role","button").click(function(a){j.hasClass(H)||
d.hide(a);return h});d.redraw()}function g(){var k=D+"-title";u.titlebar&&y();u.titlebar=c("<div />",{"class":C+"-titlebar "+(a.style.widget?"ui-widget-header":"")}).append(u.title=c("<div />",{id:k,"class":C+"-title","aria-atomic":s})).insertBefore(u.content).delegate(".ui-state-default","mousedown keydown mouseup keyup mouseout",function(a){c(this).toggleClass("ui-state-active ui-state-focus",a.type.substr(-4)==="down")}).delegate(".ui-state-default","mouseover mouseout",function(a){c(this).toggleClass("ui-state-hover",
a.type==="mouseover")});a.content.title.button?i():d.rendered&&d.redraw()}function q(a,g){var x=u.title;if(!d.rendered||!a)return h;c.isFunction(a)&&(a=a.call(b,A.event,d));if(a===h)return y(h);else a.jquery&&a.length>0?x.empty().append(a.css({display:"block"})):x.html(a);d.redraw();g!==h&&d.rendered&&j.is(":visible")&&d.reposition(A.event)}function n(a,g){function x(a){function b(k){k&&(delete j[k.src],clearTimeout(d.timers.img[k.src]),c(k).unbind(t));c.isEmptyObject(j)&&(d.redraw(),g!==h&&d.reposition(A.event),
a())}var k,j={};if((k=f.find("img:not([height]):not([width])")).length===0)return b();k.each(function(a,k){if(j[k.src]===K){var g=0;(function X(){if(k.height||k.width||g>3)return b(k);g+=1;d.timers.img[k.src]=setTimeout(X,700)})();c(k).bind("error"+t+" load"+t,function(){b(this)});j[k.src]=k}})}var f=u.content;if(!d.rendered||!a)return h;c.isFunction(a)&&(a=a.call(b,A.event,d)||"");a.jquery&&a.length>0?f.empty().append(a.css({display:"block"})):f.html(a);d.rendered<0?j.queue("fx",x):(w=0,x(c.noop));
return d}function p(){var k,g,Q,i,e,q;function l(b){if(j.hasClass(H))return h;k.trigger("qtip-"+f+"-inactive");clearTimeout(d.timers.show);clearTimeout(d.timers.hide);var c=function(){d.toggle(s,b)};a.show.delay>0?d.timers.show=setTimeout(c,a.show.delay):c()}function o(b){if(j.hasClass(H)||x||w)return h;var g=c(b.relatedTarget||b.target),f=g.closest(I)[0]===j[0],g=g[0]===k[0];clearTimeout(d.timers.show);clearTimeout(d.timers.hide);if(m.target==="mouse"&&f||a.hide.fixed&&/mouse(out|leave|move)/.test(b.type)&&
(f||g))try{b.preventDefault(),b.stopImmediatePropagation()}catch(i){}else a.hide.delay>0?d.timers.hide=setTimeout(function(){d.hide(b)},a.hide.delay):d.hide(b)}function n(b){if(j.hasClass(H))return h;clearTimeout(d.timers.inactive);d.timers.inactive=setTimeout(function(){d.hide(b)},a.hide.inactive)}function y(a){j.is(":visible")&&d.reposition(a)}var m=a.position;k=a.show.target;g=a.hide.target;Q=c(m.viewport);i=c(document);e=c(document.body);q=c(F);var z=c.trim(""+a.show.event).split(" "),p=c.trim(""+
a.hide.event).split(" "),E=c.browser.msie&&parseInt(c.browser.version,10)===6;j.bind("mouseenter"+t+" mouseleave"+t,function(a){var b=a.type==="mouseenter";b&&d.focus(a);j.toggleClass(Y,b)});a.hide.fixed&&(g=g.add(j),j.bind("mouseover"+t,function(){j.hasClass(H)||clearTimeout(d.timers.hide)}));/mouse(out|leave)/i.test(a.hide.event)?a.hide.leave==="window"&&q.bind("mouseout"+t,function(a){/select|option/.test(a.target)&&!a.relatedTarget&&d.hide(a)}):/mouse(over|enter)/i.test(a.show.event)&&g.bind("mouseleave"+
t,function(){clearTimeout(d.timers.show)});(""+a.hide.event).indexOf("unfocus")>-1&&e.bind("mousedown"+t,function(a){var k=c(a.target);!j.hasClass(H)&&j.is(":visible");k[0]!==j[0]&&k.parents(I).length===0&&k.add(b).length>1&&!k.attr("disabled")&&d.hide(a)});"number"===typeof a.hide.inactive&&(k.bind("qtip-"+f+"-inactive",n),c.each(B.inactiveEvents,function(a,b){g.add(u.tooltip).bind(b+t+"-inactive",n)}));c.each(p,function(a,b){var d=c.inArray(b,z),x=c(g);d>-1&&x.add(k).length===x.length||b==="unfocus"?
(k.bind(b+t,function(a){j.is(":visible")?o(a):l(a)}),delete z[d]):g.bind(b+t,o)});c.each(z,function(a,b){k.bind(b+t,l)});"number"===typeof a.hide.distance&&k.add(j).bind("mousemove"+t,function(b){var k=A.origin||{},c=a.hide.distance,g=Math.abs;(g(b.pageX-k.pageX)>=c||g(b.pageY-k.pageY)>=c)&&d.hide(b)});m.target==="mouse"&&(k.bind("mousemove"+t,function(a){J={pageX:a.pageX,pageY:a.pageY,type:"mousemove"}}),m.adjust.mouse&&(a.hide.event&&j.bind("mouseleave"+t,function(a){(a.relatedTarget||a.target)!==
k[0]&&d.hide(a)}),i.bind("mousemove"+t,function(a){!j.hasClass(H)&&j.is(":visible")&&d.reposition(a||J)})));if(m.adjust.resize||Q.length)(c.event.special.resize?Q:q).bind("resize"+t,y);(Q.length||E&&j.css("position")==="fixed")&&Q.bind("scroll"+t,y)}function E(){var b=[a.show.target[0],a.hide.target[0],d.rendered&&u.tooltip[0],a.position.container[0],a.position.viewport[0],F,document];d.rendered?c([]).pushStack(c.grep(b,function(a){return typeof a==="object"})).unbind(t):a.show.target.unbind(t+"-create")}
var d=this,z=document.body,D=C+"-"+f,x=0,w=0,j=c(),t=".qtip-"+f,u,A;d.id=f;d.rendered=h;d.elements=u={target:b};d.timers={img:{}};d.options=a;d.checks={};d.plugins={};d.cache=A={event:{},target:c(),disabled:h,attr:e};d.checks.builtin={"^id$":function(a,b,g){a=g===s?B.nextid:g;b=C+"-"+a;if(a!==h&&a.length>0&&!c("#"+b).length)j[0].id=b,u.content[0].id=b+"-content",u.title[0].id=b+"-title"},"^content.text$":function(a,b,c){n(c)},"^content.title.text$":function(a,b,c){if(!c)return y();!u.title&&c&&g();
q(c)},"^content.title.button$":function(a,b,c){a=u.button;b=u.title;d.rendered&&(c?(b||g(),i()):a.remove())},"^position.(my|at)$":function(a,b,c){"string"===typeof c&&(a[b]=new m.Corner(c))},"^position.container$":function(a,b,c){d.rendered&&j.appendTo(c)},"^show.ready$":function(){d.rendered?d.toggle(s):d.render(1)},"^style.classes$":function(a,b,c){j.attr("class",C+" qtip ui-helper-reset "+c)},"^style.widget|content.title":l,"^events.(render|show|move|hide|focus|blur)$":function(a,b,g){j[(c.isFunction(g)?
"":"un")+"bind"]("tooltip"+b,g)},"^(show|hide|position).(event|target|fixed|inactive|leave|distance|viewport|adjust)":function(){var b=a.position;j.attr("tracking",b.target==="mouse"&&b.adjust.mouse);E();p()}};c.extend(d,{render:function(k){if(d.rendered)return d;var f=a.content.text,i=a.content.title.text,e=a.position,t=c.Event("tooltiprender");c.attr(b[0],"aria-describedby",D);j=u.tooltip=c("<div/>",{id:D,"class":C+" qtip ui-helper-reset "+V+" "+a.style.classes+" "+C+"-pos-"+a.position.my.abbreviation(),
width:a.style.width||"",height:a.style.height||"",tracking:e.target==="mouse"&&e.adjust.mouse,role:"alert","aria-live":"polite","aria-atomic":h,"aria-describedby":D+"-content","aria-hidden":s}).toggleClass(H,A.disabled).data("qtip",d).appendTo(a.position.container).append(u.content=c("<div />",{"class":C+"-content",id:D+"-content","aria-atomic":s}));d.rendered=-1;x=w=1;i&&(g(),c.isFunction(i)||q(i,h));c.isFunction(f)||n(f,h);d.rendered=s;l();c.each(a.events,function(a,b){c.isFunction(b)&&j.bind(a===
"toggle"?"tooltipshow tooltiphide":"tooltip"+a,b)});c.each(m,function(){this.initialize==="render"&&this(d)});p();j.queue("fx",function(b){t.originalEvent=A.event;j.trigger(t,[d]);x=w=0;d.redraw();(a.show.ready||k)&&d.toggle(s,A.event);b()});return d},get:function(b){switch(b.toLowerCase()){case "dimensions":b={height:j.outerHeight(),width:j.outerWidth()};break;case "offset":b=m.offset(j,a.position.container);break;default:b=o(b.toLowerCase()),b=b[0][b[1]],b=b.precedance?b.string():b}return b},set:function(b,
g){var f=/^position\.(my|at|adjust|target|container)|style|content|show\.ready/i,i=/^content\.(title|attr)|style/i,e=h,q=h,t=d.checks,l;"string"===typeof b?(l=b,b={},b[l]=g):b=c.extend(s,{},b);c.each(b,function(a,g){var d=o(a.toLowerCase()),j;j=d[0][d[1]];d[0][d[1]]="object"===typeof g&&g.nodeType?c(g):g;b[a]=[d[0],d[1],g,j];e=f.test(a)||e;q=i.test(a)||q});R(a);x=w=1;c.each(b,function(a,b){var c,g,k;for(c in t)for(g in t[c])if(k=RegExp(g,"i").exec(a))b.push(k),t[c][g].apply(d,b)});x=w=0;j.is(":visible")&&
d.rendered&&(e&&d.reposition(a.position.target==="mouse"?v:A.event),q&&d.redraw());return d},toggle:function(b,g){function x(){b?(c.browser.msie&&j[0].style.removeAttribute("filter"),j.css("overflow",""),"string"===typeof e.autofocus&&c(e.autofocus,j).focus(),o=c.Event("tooltipvisible"),o.originalEvent=g?A.event:v,j.trigger(o,[d])):j.css({display:"",visibility:"",opacity:"",left:"",top:""})}if(!d.rendered)if(b)d.render(1);else return d;var i=b?"show":"hide",e=a[i],t=j.is(":visible"),l=!g||a[i].target.length<
2||A.target[0]===g.target,w=a.position,u=a.content,o;(typeof b).search("boolean|number")&&(b=!t);if(!j.is(":animated")&&t===b&&l)return d;if(g){if(/over|enter/.test(g.type)&&/out|leave/.test(A.event.type)&&g.target===a.show.target[0]&&j.has(g.relatedTarget).length)return d;A.event=c.extend({},g)}o=c.Event("tooltip"+i);o.originalEvent=g?A.event:v;j.trigger(o,[d,90]);if(o.isDefaultPrevented())return d;c.attr(j[0],"aria-hidden",!b);b?(A.origin=c.extend({},J),d.focus(g),c.isFunction(u.text)&&n(u.text,
h),c.isFunction(u.title.text)&&q(u.title.text,h),!S&&w.target==="mouse"&&w.adjust.mouse&&(c(document).bind("mousemove.qtip",function(a){J={pageX:a.pageX,pageY:a.pageY,type:"mousemove"}}),S=s),d.reposition(g),(o.solo=!!e.solo)&&c(I,e.solo).not(j).qtip("hide",o)):(clearTimeout(d.timers.show),delete A.origin,S&&!c(I+'[tracking="true"]:visible',e.solo).not(j).length&&(c(document).unbind("mousemove.qtip"),S=h),d.blur(g));l&&j.stop(0,1);e.effect===h?(j[i](),x.call(j)):c.isFunction(e.effect)?(e.effect.call(j,
d),j.queue("fx",function(a){x();a()})):j.fadeTo(90,b?1:0,x);b&&e.target.trigger("qtip-"+f+"-inactive");return d},show:function(a){return d.toggle(s,a)},hide:function(a){return d.toggle(h,a)},focus:function(a){if(!d.rendered)return d;var b=c(I),g=parseInt(j[0].style.zIndex,10),x=B.zindex+b.length,a=c.extend({},a),f;if(!j.hasClass(M)&&(f=c.Event("tooltipfocus"),f.originalEvent=a,j.trigger(f,[d,x]),!f.isDefaultPrevented()))g!==x&&(b.each(function(){this.style.zIndex>g&&(this.style.zIndex-=1)}),b.filter("."+
M).qtip("blur",a)),j.addClass(M)[0].style.zIndex=x;return d},blur:function(a){var a=c.extend({},a),b;j.removeClass(M);b=c.Event("tooltipblur");b.originalEvent=a;j.trigger(b,[d]);return d},reposition:function(b,g){if(!d.rendered||x)return d;x=1;var f=a.position.target,i=a.position,e=i.my,t=i.at,q=i.adjust,l=q.method.split(" "),w=j.outerWidth(),o=j.outerHeight(),u=0,n=0,y=c.Event("tooltipmove"),s=j.css("position")==="fixed",p=i.viewport,r={left:0,top:0},E=h,v=d.plugins.tip,D={horizontal:l[0],vertical:l[1]=
l[1]||l[0],enabled:p.jquery&&f[0]!==F&&f[0]!==z&&q.method!=="none",left:function(a){var b=D.horizontal==="shift",c=p.offset.left+p.scrollLeft,g=e.x==="left"?w:e.x==="right"?-w:-w/2,d=t.x==="left"?u:t.x==="right"?-u:-u/2,f=v&&v.size?v.size.width||0:0,j=v&&v.corner&&v.corner.precedance==="x"&&!b?f:0,x=c-a+j,i=a+w-p.width-c+j,d=g-(e.precedance==="x"||e.x===e.y?d:0),j=e.x==="center";if(b)j=v&&v.corner&&v.corner.precedance==="y"?f:0,d=(e.x==="left"?1:-1)*g-j,r.left+=x>0?x:i>0?-i:0,r.left=Math.max(p.offset.left+
(j&&v.corner.x==="center"?v.offset:0),a-d,Math.min(Math.max(p.offset.left+p.width,a+d),r.left));else{if(x>0&&(e.x!=="left"||i>0))r.left-=d;else if(i>0&&(e.x!=="right"||x>0))r.left-=j?-d:d;r.left!==a&&j&&(r.left-=q.x);if(r.left<c&&-r.left>i)r.left=a}return r.left-a},top:function(a){var b=D.vertical==="shift",c=p.offset.top+p.scrollTop,g=e.y==="top"?o:e.y==="bottom"?-o:-o/2,d=t.y==="top"?n:t.y==="bottom"?-n:-n/2,f=v&&v.size?v.size.height||0:0,j=v&&v.corner&&v.corner.precedance==="y"&&!b?f:0,x=c-a+j,
c=a+o-p.height-c+j,d=g-(e.precedance==="y"||e.x===e.y?d:0),j=e.y==="center";if(b)j=v&&v.corner&&v.corner.precedance==="x"?f:0,d=(e.y==="top"?1:-1)*g-j,r.top+=x>0?x:c>0?-c:0,r.top=Math.max(p.offset.top+(j&&v.corner.x==="center"?v.offset:0),a-d,Math.min(Math.max(p.offset.top+p.height,a+d),r.top));else{if(x>0&&(e.y!=="top"||c>0))r.top-=d;else if(c>0&&(e.y!=="bottom"||x>0))r.top-=j?-d:d;r.top!==a&&j&&(r.top-=q.y);if(r.top<0&&-r.top>c)r.top=a}return r.top-a}};if(c.isArray(f)&&f.length===2)t={x:"left",
y:"top"},r={left:f[0],top:f[1]};else if(f==="mouse"&&(b&&b.pageX||A.event.pageX))t={x:"left",y:"top"},b=(b&&(b.type==="resize"||b.type==="scroll")?A.event:b&&b.pageX&&b.type==="mousemove"?b:J&&J.pageX&&(q.mouse||!b||!b.pageX)?{pageX:J.pageX,pageY:J.pageY}:!q.mouse&&A.origin&&A.origin.pageX?A.origin:b)||b||A.event||J||{},r={top:b.pageY,left:b.pageX};else{f==="event"?f=b&&b.target&&b.type!=="scroll"&&b.type!=="resize"?A.target=c(b.target):A.target:A.target=c(f);f=c(f).eq(0);if(f.length===0)return d;
else f[0]===document||f[0]===F?(u=m.iOS?F.innerWidth:f.width(),n=m.iOS?F.innerHeight:f.height(),f[0]===F&&(r={top:!s||m.iOS?(p||f).scrollTop():0,left:!s||m.iOS?(p||f).scrollLeft():0})):f.is("area")&&m.imagemap?r=m.imagemap(f,t,D.enabled?l:h):f[0].namespaceURI==="http://www.w3.org/2000/svg"&&m.svg?r=m.svg(f,t):(u=f.outerWidth(),n=f.outerHeight(),r=m.offset(f,i.container));if(r.offset)u=r.width,n=r.height,E=r.flipoffset,r=r.offset;if(m.iOS<4.1&&m.iOS>3.1||m.iOS==4.3||!m.iOS&&s)l=c(F),r.left-=l.scrollLeft(),
r.top-=l.scrollTop();r.left+=t.x==="right"?u:t.x==="center"?u/2:0;r.top+=t.y==="bottom"?n:t.y==="center"?n/2:0}r.left+=q.x+(e.x==="right"?-w:e.x==="center"?-w/2:0);r.top+=q.y+(e.y==="bottom"?-o:e.y==="center"?-o/2:0);D.enabled?(p={elem:p,height:p[(p[0]===F?"h":"outerH")+"eight"](),width:p[(p[0]===F?"w":"outerW")+"idth"](),scrollLeft:s?0:p.scrollLeft(),scrollTop:s?0:p.scrollTop(),offset:p.offset()||{left:0,top:0}},r.adjusted={left:D.horizontal!=="none"?D.left(r.left):0,top:D.vertical!=="none"?D.top(r.top):
0},r.adjusted.left+r.adjusted.top&&j.attr("class",function(a,b){return b.replace(/ui-tooltip-pos-\w+/i,C+"-pos-"+e.abbreviation())}),E&&r.adjusted.left&&(r.left+=E.left),E&&r.adjusted.top&&(r.top+=E.top)):r.adjusted={left:0,top:0};y.originalEvent=c.extend({},b);j.trigger(y,[d,r,p.elem||p]);if(y.isDefaultPrevented())return d;delete r.adjusted;g===h||isNaN(r.left)||isNaN(r.top)||f==="mouse"||!c.isFunction(i.effect)?j.css(r):c.isFunction(i.effect)&&(i.effect.call(j,d,c.extend({},r)),j.queue(function(a){c(this).css({opacity:"",
height:""});c.browser.msie&&this.style.removeAttribute("filter");a()}));x=0;return d},redraw:function(){if(d.rendered<1||w)return d;var b=a.position.container,c,g,f;w=1;a.style.height&&j.css("height",a.style.height);a.style.width?j.css("width",a.style.width):(j.css("width","").addClass(O),c=j.width()+1,g=j.css("max-width")||"",f=j.css("min-width")||"",b=(g+f).indexOf("%")>-1?b.width()/100:0,g=(g.indexOf("%")>-1?b:1)*parseInt(g,10)||c,f=(f.indexOf("%")>-1?b:1)*parseInt(f,10)||0,c=g+f?Math.min(Math.max(c,
f),g):c,j.css("width",Math.round(c)).removeClass(O));w=0;return d},disable:function(a){"boolean"!==typeof a&&(a=!(j.hasClass(H)||A.disabled));d.rendered?(j.toggleClass(H,a),c.attr(j[0],"aria-disabled",a)):A.disabled=!!a;return d},enable:function(){return d.disable(h)},destroy:function(){var g=b[0],x=c.attr(g,N),e=b.data("qtip");d.rendered&&(j.remove(),c.each(d.plugins,function(){this.destroy&&this.destroy()}));clearTimeout(d.timers.show);clearTimeout(d.timers.hide);E();if(!e||d===e)c.removeData(g,
"qtip"),a.suppress&&x&&(c.attr(g,"title",x),b.removeAttr(N)),b.removeAttr("aria-describedby");b.unbind(".qtip-"+f);delete U[d.id];return b}})}function Z(b,a){var f,e,o,l,y,i=c(this),g=c(document.body),q=this===document?g:i;e=i.metadata?i.metadata(a.metadata):v;l=a.metadata.type==="html5"&&e?e[a.metadata.name]:v;var n=i.data(a.metadata.name||"qtipopts");try{n=typeof n==="string"?(new Function("return "+n))():n}catch(p){P("Unable to parse HTML5 attribute data: "+n)}l=c.extend(s,{},B.defaults,a,typeof n===
"object"?R(n):v,R(l||e));e=l.position;l.id=b;if("boolean"===typeof l.content.text)if(o=i.attr(l.content.attr),l.content.attr!==h&&o)l.content.text=o;else return P("Unable to locate content for tooltip! Aborting render of tooltip on element: ",i),h;if(e.container===h)e.container=g;if(e.target===h)e.target=q;if(l.show.target===h)l.show.target=q;if(l.show.solo===s)l.show.solo=g;if(l.hide.target===h)l.hide.target=q;if(l.position.viewport===s)l.position.viewport=e.container;e.at=new m.Corner(e.at);e.my=
new m.Corner(e.my);if(c.data(this,"qtip"))if(l.overwrite)i.qtip("destroy");else if(l.overwrite===h)return h;l.suppress&&(y=c.attr(this,"title"))&&c(this).removeAttr("title").attr(N,y);f=new W(i,l,b,!!o);c.data(this,"qtip",f);i.bind("remove.qtip-"+b,function(){f.destroy()});return f}function $(b){var a=this,f=b.elements.tooltip,e=b.options.content.ajax,o=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi;b.checks.ajax={"^content.ajax":function(b,c,i){c==="ajax"&&(e=i);c==="once"?a.init():e&&e.url?
a.load():f.unbind(".qtip-ajax")}};c.extend(a,{init:function(){if(e&&e.url)f.unbind(".qtip-ajax")[e.once?"one":"bind"]("tooltipshow.qtip-ajax",a.load);return a},load:function(f,y){var i=e.url.indexOf(" "),g=e.url,q,n=e.once&&!e.loading&&y;if(n)try{f.preventDefault()}catch(p){}else if(f&&f.isDefaultPrevented())return a;i>-1&&(q=g.substr(i),g=g.substr(0,i));c.ajax(c.extend({success:function(a){q&&(a=c("<div/>").append(a.replace(o,"")).find(q));b.set("content.text",a)},error:function(a,c,g){a.status!==
0&&b.set("content.text",c+": "+g)},context:b},e,{url:g,complete:function(){n&&(b.show(f.originalEvent),y=h);c.isFunction(e.complete)&&e.complete.apply(this,arguments)}}))}});a.init()}function aa(b){var a=this,f=b.elements,e=f.tooltip,h=".bgiframe-"+b.id;c.extend(a,{init:function(){f.bgiframe=c('<iframe class="ui-tooltip-bgiframe" frameborder="0" tabindex="-1" src="javascript:\'\';"  style="display:block; position:absolute; z-index:-1; filter:alpha(opacity=0); -ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=0)";"></iframe>');
f.bgiframe.appendTo(e);e.bind("tooltipmove"+h,a.adjust)},adjust:function(){var a=b.get("dimensions"),c=b.plugins.tip,i=f.tip,g;g=parseInt(e.css("border-left-width"),10)||0;g={left:-g,top:-g};c&&i&&(c=c.corner.precedance==="x"?["width","left"]:["height","top"],g[c[1]]-=i[c[0]]());f.bgiframe.css(g).css(a)},destroy:function(){f.bgiframe.remove();e.unbind(h)}});a.init()}function ba(b){var a=this,f=b.options.show.modal,e=b.elements,o=e.tooltip,l=".qtipmodal"+b.id,y=c(document.body),i;b.checks.modal={"^show.modal.(on|blur)$":function(){a.init();
e.overlay.toggle(o.is(":visible"))}};c.extend(a,{init:function(){if(!f.on)return a;i=a.create();o.attr("is-modal-qtip",s).css("z-index",m.modal.zindex+c(I+"[is-modal-qtip]").length).unbind(".qtipmodal").unbind(l).bind("tooltipshow.qtipmodal tooltiphide.qtipmodal",function(b,f,e){if((f=b.originalEvent)&&b.type==="tooltiphide"&&/mouse(leave|enter)/.test(f.type)&&c(f.relatedTarget).closest(i[0]).length)try{b.preventDefault()}catch(h){}else if(f&&!f.solo)a[b.type.replace("tooltip","")](b,e)}).bind("tooltipfocus.qtipmodal",
function(a){if(!a.isDefaultPrevented()){var b=c(I).filter("[is-modal-qtip]"),f=m.modal.zindex+b.length,e=parseInt(o[0].style.zIndex,10);i[0].style.zIndex=f-1;b.each(function(){this.style.zIndex>e&&(this.style.zIndex-=1)});b.end().filter("."+M).qtip("blur",a.originalEvent);o.addClass(M)[0].style.zIndex=f;try{a.preventDefault()}catch(h){}}}).bind("tooltiphide.qtipmodal",function(a){c("[is-modal-qtip]").filter(":visible").not(o).last().qtip("focus",a)});f.escape&&c(F).unbind(l).bind("keydown"+l,function(a){a.keyCode===
27&&o.hasClass(M)&&b.hide(a)});f.blur&&e.overlay.unbind(l).bind("click"+l,function(a){o.hasClass(M)&&b.hide(a)});return a},create:function(){var a=c("#qtip-overlay");if(a.length)return e.overlay=a.insertAfter(c(I).last());i=e.overlay=c("<div />",{id:"qtip-overlay",html:"<div></div>",mousedown:function(){return h}}).insertAfter(c(I).last());c(F).unbind(".qtipmodal").bind("resize.qtipmodal",function(){i.css({height:c(F).height(),width:c(F).width()})}).triggerHandler("resize");return i},toggle:function(b,
e,n){if(b&&b.isDefaultPrevented())return a;var b=f.effect,p=e?"show":"hide",m=i.is(":visible"),d=c("[is-modal-qtip]").filter(":visible").not(o);i||(i=a.create());if(i.is(":animated")&&m===e||!e&&d.length)return a;e?(i.css({left:0,top:0}),i.toggleClass("blurs",f.blur),y.bind("focusin"+l,function(a){var b=c(a.target).closest(".qtip");!(b.length<1?h:parseInt(b[0].style.zIndex,10)>parseInt(o[0].style.zIndex,10))&&c(a.target).closest(I)[0]!==o[0]&&o.find("input:visible").filter(":first").focus()})):y.undelegate("*",
"focusin"+l);i.stop(s,h);if(c.isFunction(b))b.call(i,e);else if(b===h)i[p]();else i.fadeTo(parseInt(n,10)||90,e?1:0,function(){e||c(this).hide()});e||i.queue(function(a){i.css({left:"",top:""});a()});return a},show:function(b,c){return a.toggle(b,s,c)},hide:function(b,c){return a.toggle(b,h,c)},destroy:function(){var a=i;a&&((a=c("[is-modal-qtip]").not(o).length<1)?(e.overlay.remove(),c(F).unbind(".qtipmodal")):e.overlay.unbind(".qtipmodal"+b.id),y.undelegate("*","focusin"+l));return o.removeAttr("is-modal-qtip").unbind(".qtipmodal")}});
a.init()}function ca(b,a,c){var e=Math.ceil(a/2),h=Math.ceil(c/2),a={bottomright:[[0,0],[a,c],[a,0]],bottomleft:[[0,0],[a,0],[0,c]],topright:[[0,c],[a,0],[a,c]],topleft:[[0,0],[0,c],[a,c]],topcenter:[[0,c],[e,0],[a,c]],bottomcenter:[[0,0],[a,0],[e,c]],rightcenter:[[0,0],[a,h],[0,c]],leftcenter:[[a,0],[a,c],[0,h]]};a.lefttop=a.bottomright;a.righttop=a.bottomleft;a.leftbottom=a.topright;a.rightbottom=a.topleft;return a[b.string()]}function da(b){var a,f,e;function o(d,w,j){if(q.tip){var d=c.extend({},
i.corner),w=j.adjusted,t=b.options.position.adjust.method.split(" "),u=t[0],t=t[1]||t[0],l=h,k=h,o=0,n=0,p,y={},m;if(i.corner.fixed!==s){if(u==="shift"&&d.precedance==="x"&&w.left&&d.y!=="center")d.precedance=d.precedance==="x"?"y":"x";else if(u==="flip"&&w.left)d.x=d.x==="center"?w.left>0?"left":"right":d.x==="left"?"right":"left";if(t==="shift"&&d.precedance==="y"&&w.top&&d.x!=="center")d.precedance=d.precedance==="y"?"x":"y";else if(t==="flip"&&w.top)d.y=d.y==="center"?w.top>0?"top":"bottom":d.y===
"top"?"bottom":"top";d.string()!==a&&(f!==w.top||e!==w.left)&&i.update(d,h)}p=i.position(d,w);if(p.right!==K)p.left=-p.right;if(p.bottom!==K)p.top=-p.bottom;p.user=Math.max(0,g.offset);if(l=u==="shift"&&!!w.left)if(d.x==="center")y["margin-left"]=o=p["margin-left"]-w.left;else{m=p.right!==K?[w.left,-p.left]:[-w.left,p.left];if((o=Math.max(m[0],m[1]))>m[0])j.left-=w.left,l=h;y[p.right!==K?"right":"left"]=o}if(k=t==="shift"&&!!w.top)if(d.y==="center")y["margin-top"]=n=p["margin-top"]-w.top;else{m=p.bottom!==
K?[w.top,-p.top]:[-w.top,p.top];if((n=Math.max(m[0],m[1]))>m[0])j.top-=w.top,k=h;y[p.bottom!==K?"bottom":"top"]=n}q.tip.css(y).toggle(!(o&&n||d.x==="center"&&n||d.y==="center"&&o));j.left-=p.left.charAt?p.user:u!=="shift"||k||!l&&!k?p.left:0;j.top-=p.top.charAt?p.user:t!=="shift"||l||!l&&!k?p.top:0;e=w.left;f=w.top;a=d.string()}}function l(a,b,c){var b=!b?a[a.precedance]:b,d=n.hasClass(O),a=q.titlebar&&a.y==="top"?q.titlebar:q.content,b="border-"+b+"-width";n.addClass(O);a=parseInt(a.css(b),10);a=
(c?a||parseInt(n.css(b),10):a)||0;n.toggleClass(O,d);return a}function y(a){var b=a.precedance==="y",c=p[b?"width":"height"],d=p[b?"height":"width"],g=a.string().indexOf("center")>-1,f=c*(g?0.5:1),e=Math.pow,a=Math.round,i=Math.sqrt(e(f,2)+e(d,2)),f=[z/f*i,z/d*i];f[2]=Math.sqrt(e(f[0],2)-e(z,2));f[3]=Math.sqrt(e(f[1],2)-e(z,2));g=(i+f[2]+f[3]+(g?0:f[0]))/i;c=[a(g*d),a(g*c)];return{height:c[b?0:1],width:c[b?1:0]}}var i=this,g=b.options.style.tip,q=b.elements,n=q.tooltip;f=0;e=0;a="";var p={width:g.width,
height:g.height},E,d,z=g.border||0,D=!!(c("<canvas />")[0]||{}).getContext;i.corner=v;i.mimic=v;i.border=z;i.offset=g.offset;i.size=p;b.checks.tip={"^position.my|style.tip.(corner|mimic|border)$":function(){i.init()||i.destroy();b.reposition()},"^style.tip.(height|width)$":function(){p={width:g.width,height:g.height};i.create();i.update();b.reposition()},"^content.title.text|style.(classes|widget)$":function(){q.tip&&i.update()}};c.extend(i,{init:function(){var a=i.detectCorner()&&(D||c.browser.msie);
a&&(i.create(),i.update(),n.unbind(".qtip-tip").bind("tooltipmove.qtip-tip",o));return a},detectCorner:function(){var a=g.corner,c=b.options.position,d=c.at,c=c.my.string?c.my.string():c.my;if(a===h||c===h&&d===h)return h;else if(a===s)i.corner=new m.Corner(c);else if(!a.string)i.corner=new m.Corner(a),i.corner.fixed=s;return i.corner.string()!=="centercenter"},detectColours:function(){var a,f,e=q.tip.css({backgroundColor:"",border:""});a=i.corner;var h=a[a.precedance],l="border-"+h+"-color";f="border"+
h.charAt(0)+h.substr(1)+"Color";var h=/rgba?\(0, 0, 0(, 0)?\)|transparent/i,o=c(document.body).css("color"),k=b.elements.content.css("color"),m=q.titlebar&&(a.y==="top"||a.y==="center"&&e.position().top+p.height/2+g.offset<q.titlebar.outerHeight(1))?q.titlebar:q.content;n.addClass(O);E=a=e.css("background-color");d=f=e[0].style[f]||e.css(l)||n.css(l);if(!a||h.test(a))E=m.css("background-color")||"transparent",h.test(E)&&(E=n.css("background-color")||a);if(!f||h.test(f)||f===o)if(d=m.css(l)||"transparent",
h.test(d)||d===k)d=f;c("*",e).add(e).css("background-color","transparent").css("border","");n.removeClass(O)},create:function(){var a=p.width,b=p.height;q.tip&&q.tip.remove();q.tip=c("<div />",{"class":"ui-tooltip-tip"}).css({width:a,height:b}).prependTo(n);D?c("<canvas />").appendTo(q.tip)[0].getContext("2d").save():q.tip.html('<vml:shape coordorigin="0,0" style="display:inline-block; position:absolute; behavior:url(#default#VML);"></vml:shape><vml:shape coordorigin="0,0" style="display:inline-block; position:absolute; behavior:url(#default#VML);"></vml:shape>')},
update:function(a,b){var f=q.tip,e=f.children(),o=p.width,n=p.height,k=g.mimic,B=Math.round,C,G,L;if(!a)a=i.corner;k===h?k=a:(k=new m.Corner(k),k.precedance=a.precedance,k.x==="inherit"?k.x=a.x:k.y==="inherit"?k.y=a.y:k.x===k.y&&(k[a.precedance]=a[a.precedance]));C=k.precedance;i.detectColours();d!=="transparent"&&d!=="#123456"?(z=l(a,v,s),g.border===0&&z>0&&(E=d),i.border=z=g.border!==s?g.border:z):i.border=z=0;G=ca(k,o,n);i.size=L=y(a);f.css(L);f=a.precedance==="y"?[B(k.x==="left"?z:k.x==="right"?
L.width-o-z:(L.width-o)/2),B(k.y==="top"?L.height-n:0)]:[B(k.x==="left"?L.width-o:0),B(k.y==="top"?z:k.y==="bottom"?L.height-n-z:(L.height-n)/2)];D?(e.attr(L),e=e[0].getContext("2d"),e.restore(),e.save(),e.clearRect(0,0,3E3,3E3),e.translate(f[0],f[1]),e.beginPath(),e.moveTo(G[0][0],G[0][1]),e.lineTo(G[1][0],G[1][1]),e.lineTo(G[2][0],G[2][1]),e.closePath(),e.fillStyle=E,e.strokeStyle=d,e.lineWidth=z*2,e.lineJoin="miter",e.miterLimit=100,z&&e.stroke(),e.fill()):(G="m"+G[0][0]+","+G[0][1]+" l"+G[1][0]+
","+G[1][1]+" "+G[2][0]+","+G[2][1]+" xe",f[2]=z&&/^(r|b)/i.test(a.string())?parseFloat(c.browser.version,10)===8?2:1:0,e.css({antialias:""+(k.string().indexOf("center")>-1),left:f[0]-f[2]*Number(C==="x"),top:f[1]-f[2]*Number(C==="y"),width:o+z,height:n+z}).each(function(a){var b=c(this);b[b.prop?"prop":"attr"]({coordsize:o+z+" "+(n+z),path:G,fillcolor:E,filled:!!a,stroked:!a}).css({display:z||a?"block":"none"});!a&&b.html()===""&&b.html('<vml:stroke weight="'+z*2+'px" color="'+d+'" miterlimit="1000" joinstyle="miter"  style="behavior:url(#default#VML); display:inline-block;" />')}));
b!==h&&i.position(a)},position:function(a){var b=q.tip,d={},f=Math.max(0,g.offset),e,o,k;if(g.corner===h||!b)return h;a=a||i.corner;e=a.precedance;o=y(a);k=[a.x,a.y];e==="x"&&k.reverse();c.each(k,function(b,g){var i,h;if(g==="center")i=e==="y"?"left":"top",d[i]="50%",d["margin-"+i]=-Math.round(o[e==="y"?"width":"height"]/2)+f;else{i=l(a,g,s);h=c.browser.mozilla;var k=a.y+(h?"":"-")+a.x;h=(h?"-moz-":c.browser.webkit?"-webkit-":"")+(h?"border-radius-"+k:"border-"+k+"-radius");h=parseInt((q.titlebar&&
a.y==="top"?q.titlebar:q.content).css(h),10)||parseInt(n.css(h),10)||0;d[g]=b?z?l(a,g):0:f+(h>i?h:0)}});d[a[e]]-=o[e==="x"?"width":"height"];b.css({top:"",bottom:"",left:"",right:"",margin:""}).css(d);return d},destroy:function(){q.tip&&q.tip.remove();n.unbind(".qtip-tip")}});i.init()}var s=!0,h=!1,v=null,B,m,J,U={},C="ui-tooltip",T="ui-widget",H="ui-state-disabled",I="div.qtip."+C,V=C+"-default",M=C+"-focus",Y=C+"-hover",O=C+"-fluid",N="oldtitle",S;B=c.fn.qtip=function(b,a,f){var e=(""+b).toLowerCase(),
o=v,l=e==="disable"?[s]:c.makeArray(arguments).slice(1),m=l[l.length-1],i=this[0]?c.data(this[0],"qtip"):v;if(!arguments.length&&i||e==="api")return i;else if("string"===typeof b)return this.each(function(){var b=c.data(this,"qtip");if(!b)return s;if(m&&m.timeStamp)b.cache.event=m;if((e==="option"||e==="options")&&a)if(c.isPlainObject(a)||f!==K)b.set(a,f);else return o=b.get(a),h;else b[e]&&b[e].apply(b[e],l)}),o!==v?o:this;else if("object"===typeof b||!arguments.length)return i=R(c.extend(s,{},b)),
B.bind.call(this,i,m)};B.bind=function(b,a){return this.each(function(f){var e,o,l,y;function i(a){function b(){n.render(typeof a==="object"||g.show.ready);l.add(y).unbind(q)}if(n.cache.disabled)return h;n.cache.event=c.extend({},a);n.cache.target=a?c(a.target):[K];g.show.delay>0?(clearTimeout(n.timers.show),n.timers.show=setTimeout(b,g.show.delay),e!==o&&y.bind(o,function(){clearTimeout(n.timers.show)})):b()}var g,q,n,f=c.isArray(b.id)?b.id[f]:b.id,f=!f||f===h||f.length<1||U[f]?B.nextid++:U[f]=f;
q=".qtip-"+f+"-create";n=Z.call(this,f,b);if(n===h)return s;g=n.options;c.each(m,function(){this.initialize==="initialize"&&this(n)});l=g.show.target;y=g.hide.target;e=c.trim(""+g.show.event).replace(/ /g,q+" ")+q;o=c.trim(""+g.hide.event).replace(/ /g,q+" ")+q;/mouse(over|enter)/i.test(e)&&!/mouse(out|leave)/i.test(o)&&(o+=" mouseleave"+q);l.bind("mousemove"+q,function(a){J={pageX:a.pageX,pageY:a.pageY,type:"mousemove"}});l.bind(e,i);(g.show.ready||g.prerender)&&i(a)})};m=B.plugins={Corner:function(b){b=
(""+b).replace(/([A-Z])/," $1").replace(/middle/gi,"center").toLowerCase();this.x=(b.match(/left|right/i)||b.match(/center/)||["inherit"])[0].toLowerCase();this.y=(b.match(/top|bottom|center/i)||["inherit"])[0].toLowerCase();this.precedance=b.charAt(0).search(/^(t|b)/)>-1?"y":"x";this.string=function(){return this.precedance==="y"?this.y+this.x:this.x+this.y};this.abbreviation=function(){var a=this.x.substr(0,1),b=this.y.substr(0,1);return a===b?a:a==="c"||a!=="c"&&b!=="c"?b+a:a+b}},offset:function(b,
a){function c(a,b){e.left+=b*a.scrollLeft();e.top+=b*a.scrollTop()}var e=b.offset(),h=a,l=0,m=document.body,i;if(h){do if(h.css("position")!=="static"&&(i=h[0]===m?{left:parseInt(h.css("left"),10)||0,top:parseInt(h.css("top"),10)||0}:h.position(),e.left-=i.left+(parseInt(h.css("borderLeftWidth"),10)||0)+(parseInt(h.css("marginLeft"),10)||0),e.top-=i.top+(parseInt(h.css("borderTopWidth"),10)||0),i=h.css("overflow"),(i==="scroll"||i==="auto")&&l++),h[0]===m)break;while(h=h.offsetParent());a[0]!==m&&
l&&c(a,1)}return e},iOS:parseFloat((""+(/CPU.*OS ([0-9_]{1,3})|(CPU like).*AppleWebKit.*Mobile/i.exec(navigator.userAgent)||[0,""])[1]).replace("undefined","3_2").replace("_","."))||h,fn:{attr:function(b,a){if(this.length){var f=this[0],e=c.data(f,"qtip");if(b==="title"&&e&&"object"===typeof e&&e.options.suppress)return arguments.length<2?c.attr(f,N):(e&&e.options.content.attr==="title"&&e.cache.attr&&e.set("content.text",a),this.attr(N,a))}return c.fn.attr_replacedByqTip.apply(this,arguments)},clone:function(b){c([]);
var a=c.fn.clone_replacedByqTip.apply(this,arguments);b||a.filter("["+N+"]").attr("title",function(){return c.attr(this,N)}).removeAttr(N);return a},remove:c.ui?v:function(b,a){c(this).each(function(){a||(!b||c.filter(b,[this]).length)&&c("*",this).add(this).each(function(){c(this).triggerHandler("remove")})})}}};c.each(m.fn,function(b,a){if(!a||c.fn[b+"_replacedByqTip"])return s;var f=c.fn[b+"_replacedByqTip"]=c.fn[b];c.fn[b]=function(){return a.apply(this,arguments)||f.apply(this,arguments)}});
B.version="2.0.0pre";B.nextid=0;B.inactiveEvents="click dblclick mousedown mouseup mousemove mouseleave mouseenter".split(" ");B.zindex=15E3;B.defaults={prerender:h,id:h,overwrite:s,suppress:s,content:{text:s,attr:"title",title:{text:h,button:h}},position:{my:"top left",at:"bottom right",target:h,container:h,viewport:h,adjust:{x:0,y:0,mouse:s,resize:s,method:"flip flip"},effect:function(b,a){c(this).animate(a,{duration:200,queue:h})}},show:{target:h,event:"mouseenter",effect:s,delay:90,solo:h,ready:h,
autofocus:h},hide:{target:h,event:"mouseleave",effect:s,delay:0,fixed:h,inactive:h,leave:"window",distance:h},style:{classes:"",widget:h,width:h,height:h},events:{render:v,move:v,show:v,hide:v,toggle:v,visible:v,focus:v,blur:v}};m.ajax=function(b){var a=b.plugins.ajax;return"object"===typeof a?a:b.plugins.ajax=new $(b)};m.ajax.initialize="render";m.ajax.sanitize=function(b){var a=b.content;if(a&&"ajax"in a){a=a.ajax;if(typeof a!=="object")a=b.content.ajax={url:a};if("boolean"!==typeof a.once&&a.once)a.once=
!!a.once}};c.extend(s,B.defaults,{content:{ajax:{loading:s,once:s}}});m.bgiframe=function(b){var a=c.browser,f=b.plugins.bgiframe;return c("select, object").length<1||!(a.msie&&a.version.charAt(0)==="6")?h:"object"===typeof f?f:b.plugins.bgiframe=new aa(b)};m.bgiframe.initialize="render";m.imagemap=function(b,a,f){function e(a,b,c){for(var e=0,f=1,g=1,i=0,h=0,l=a.width,m=a.height;l>0&&m>0&&f>0&&g>0;){l=Math.floor(l/2);m=Math.floor(m/2);c.x==="left"?f=l:c.x==="right"?f=a.width-l:f+=Math.floor(l/2);
c.y==="top"?g=m:c.y==="bottom"?g=a.height-m:g+=Math.floor(m/2);for(e=b.length;e--;){if(b.length<2)break;i=b[e][0]-a.offset.left;h=b[e][1]-a.offset.top;(c.x==="left"&&i>=f||c.x==="right"&&i<=f||c.x==="center"&&(i<f||i>a.width-f)||c.y==="top"&&h>=g||c.y==="bottom"&&h<=g||c.y==="center"&&(h<g||h>a.height-g))&&b.splice(e,1)}}return{left:b[0][0],top:b[0][1]}}b.jquery||(b=c(b));var h=b.attr("shape").toLowerCase(),l=b.attr("coords").split(","),m=[],b=c('img[usemap="#'+b.parent("map").attr("name")+'"]'),
i=b.offset(),g={width:0,height:0,offset:{top:1E10,right:0,bottom:0,left:1E10}},q=0,n=0;i.left+=Math.ceil((b.outerWidth()-b.width())/2);i.top+=Math.ceil((b.outerHeight()-b.height())/2);if(h==="poly")for(q=l.length;q--;){n=[parseInt(l[--q],10),parseInt(l[q+1],10)];if(n[0]>g.offset.right)g.offset.right=n[0];if(n[0]<g.offset.left)g.offset.left=n[0];if(n[1]>g.offset.bottom)g.offset.bottom=n[1];if(n[1]<g.offset.top)g.offset.top=n[1];m.push(n)}else m=c.map(l,function(a){return parseInt(a,10)});switch(h){case "rect":g=
{width:Math.abs(m[2]-m[0]),height:Math.abs(m[3]-m[1]),offset:{left:m[0],top:m[1]}};break;case "circle":g={width:m[2]+2,height:m[2]+2,offset:{left:m[0],top:m[1]}};break;case "poly":c.extend(g,{width:Math.abs(g.offset.right-g.offset.left),height:Math.abs(g.offset.bottom-g.offset.top)});if(a.string()==="centercenter")g.offset={left:g.offset.left+g.width/2,top:g.offset.top+g.height/2};else if(g.offset=e(g,m.slice(),a),f&&(f[0]==="flip"||f[1]==="flip"))g.flipoffset=e(g,m.slice(),{x:a.x==="left"?"right":
a.x==="right"?"left":"center",y:a.y==="top"?"bottom":a.y==="bottom"?"top":"center"}),g.flipoffset.left-=g.offset.left,g.flipoffset.top-=g.offset.top;g.width=g.height=0}g.offset.left+=i.left;g.offset.top+=i.top;return g};m.modal=function(b){var a=b.plugins.modal;return"object"===typeof a?a:b.plugins.modal=new ba(b)};m.modal.initialize="render";m.modal.sanitize=function(b){if(b.show)if(typeof b.show.modal!=="object")b.show.modal={on:!!b.show.modal};else if(typeof b.show.modal.on==="undefined")b.show.modal.on=
s};m.modal.zindex=B.zindex-=200;c.extend(s,B.defaults,{show:{modal:{on:h,effect:s,blur:s,escape:s}}});m.svg=function(b){var a=c(document),f=b[0],b={width:0,height:0,offset:{top:1E10,left:1E10}},e,h,l;if(f.getBBox&&f.parentNode){e=f.getBBox();h=f.getScreenCTM();f=f.farthestViewportElement||f;if(!f.createSVGPoint)return b;f=f.createSVGPoint();f.x=e.x;f.y=e.y;l=f.matrixTransform(h);b.offset.left=l.x;b.offset.top=l.y;f.x+=e.width;f.y+=e.height;l=f.matrixTransform(h);b.width=l.x-b.offset.left;b.height=
l.y-b.offset.top;b.offset.left+=a.scrollLeft();b.offset.top+=a.scrollTop()}return b};m.tip=function(b){var a=b.plugins.tip;return"object"===typeof a?a:b.plugins.tip=new da(b)};m.tip.initialize="render";m.tip.sanitize=function(b){var a=b.style;if(a&&"tip"in a){a=b.style.tip;if(typeof a!=="object")b.style.tip={corner:a};if(!/string|boolean/i.test(typeof a.corner))a.corner=s;typeof a.width!=="number"&&delete a.width;typeof a.height!=="number"&&delete a.height;typeof a.border!=="number"&&a.border!==s&&
delete a.border;typeof a.offset!=="number"&&delete a.offset}};c.extend(s,B.defaults,{style:{tip:{corner:s,mimic:h,width:6,height:6,border:s,offset:0}}})})(jQuery,window);
(function(e){e.color={};e.color.make=function(c,a,d,f){var b={};b.r=c||0;b.g=a||0;b.b=d||0;b.a=f!=null?f:1;b.add=function(a,c){for(var d=0;d<a.length;++d)b[a.charAt(d)]+=c;return b.normalize()};b.scale=function(a,d){for(var c=0;c<a.length;++c)b[a.charAt(c)]*=d;return b.normalize()};b.toString=function(){return b.a>=1?"rgb("+[b.r,b.g,b.b].join(",")+")":"rgba("+[b.r,b.g,b.b,b.a].join(",")+")"};b.normalize=function(){function a(b,c,d){return c<b?b:c>d?d:c}b.r=a(0,parseInt(b.r),255);b.g=a(0,parseInt(b.g),
255);b.b=a(0,parseInt(b.b),255);b.a=a(0,b.a,1);return b};b.clone=function(){return e.color.make(b.r,b.b,b.g,b.a)};return b.normalize()};e.color.extract=function(c,a){var d;do{d=c.css(a).toLowerCase();if(d!=""&&d!="transparent")break;c=c.parent()}while(!e.nodeName(c.get(0),"body"));d=="rgba(0, 0, 0, 0)"&&(d="transparent");return e.color.parse(d)};e.color.parse=function(c){var a,d=e.color.make;if(a=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(c))return d(parseInt(a[1],10),
parseInt(a[2],10),parseInt(a[3],10));if(a=/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(c))return d(parseInt(a[1],10),parseInt(a[2],10),parseInt(a[3],10),parseFloat(a[4]));if(a=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(c))return d(parseFloat(a[1])*2.55,parseFloat(a[2])*2.55,parseFloat(a[3])*2.55);if(a=/rgba\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(c))return d(parseFloat(a[1])*
2.55,parseFloat(a[2])*2.55,parseFloat(a[3])*2.55,parseFloat(a[4]));if(a=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(c))return d(parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16));if(a=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(c))return d(parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16));c=e.trim(c).toLowerCase();return c=="transparent"?d(255,255,255,0):(a=g[c]||[0,0,0],d(a[0],a[1],a[2]))};var g={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,
0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,
211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0]}})(jQuery);
(function(a){function r(c,d,b){c.value=a(d).text();a(c).change();a.browser.msie||c.focus();b.hide()}function n(c,a){var b=c.getHours(),h=a.show24Hours?b:(b+11)%12+1,f=c.getMinutes();return(h<10?"0":"")+h+a.separator+((f<10?"0":"")+f)+(a.show24Hours?"":b<12?" AM":" PM")}function o(c,a){return typeof c=="object"?p(c):q(c,a)}function q(a,d){if(a){var b=a.split(d.separator),h=parseFloat(b[0]),b=parseFloat(b[1]);d.show24Hours||(h===12&&a.indexOf("AM")!==-1?h=0:h!==12&&a.indexOf("PM")!==-1&&(h+=12));return p(new Date(0,
0,0,h,b,0))}return null}function p(a){a.setFullYear(2001);a.setMonth(0);a.setDate(0);return a}a.fn.timePicker=function(c){var d=a.extend({},a.fn.timePicker.defaults,c);return this.each(function(){a.timePicker(this,d)})};a.timePicker=function(c,d){var b=a(c)[0];return b.timePicker||(b.timePicker=new jQuery._timePicker(b,d))};a.timePicker.version="0.3";a._timePicker=function(c,d){var b=false,h=false,f=o(d.startTime,d),s=o(d.endTime,d);a(c).attr("autocomplete","OFF");for(var l=[],j=new Date(f);j<=s;)l[l.length]=
n(j,d),j=new Date(j.setMinutes(j.getMinutes()+d.step));for(var e=a('<div class="time-picker'+(d.show24Hours?"":" time-picker-12hours")+'"></div>'),k=a("<ul></ul>"),j=0;j<l.length;j++)k.append("<li>"+l[j]+"</li>");e.append(k);e.appendTo("body").hide();e.mouseover(function(){b=true}).mouseout(function(){b=false});a("li",k).mouseover(function(){h||(a("li.selected",e).removeClass("selected"),a(this).addClass("selected"))}).mousedown(function(){b=true}).click(function(){r(c,this,e,d);b=false});var m=function(){if(e.is(":visible"))return false;
a("li",e).removeClass("selected");var g=a(c).offset();e.css({top:g.top+c.offsetHeight,left:g.left});e.show();var b=c.value?q(c.value,d):f,g=f.getHours()*60+f.getMinutes(),b=b.getHours()*60+b.getMinutes()-g,b=Math.round(b/d.step),g=p(new Date(0,0,0,0,b*d.step+g,0)),g=f<g&&g<=s?g:f,g=a("li:contains("+n(g,d)+")",e);if(g.length)g.addClass("selected"),e[0].scrollTop=g[0].offsetTop;return true};a(c).focus(m).click(m);a(c).blur(function(){b||e.hide()});l=a.browser.opera||a.browser.mozilla?"keypress":"keydown";
a(c)[l](function(b){h=true;var f=e[0].scrollTop;switch(b.keyCode){case 38:if(m())return false;var b=a("li.selected",k),i=b.prev().addClass("selected")[0];if(i){if(b.removeClass("selected"),i.offsetTop<f)e[0].scrollTop=f-i.offsetHeight}else b.removeClass("selected"),i=a("li:last",k).addClass("selected")[0],e[0].scrollTop=i.offsetTop-i.offsetHeight;return false;case 40:if(m())return false;b=a("li.selected",k);if(i=b.next().addClass("selected")[0]){if(b.removeClass("selected"),i.offsetTop+i.offsetHeight>
f+e[0].offsetHeight)e[0].scrollTop=f+i.offsetHeight}else b.removeClass("selected"),a("li:first",k).addClass("selected"),e[0].scrollTop=0;return false;case 13:return e.is(":visible")&&(f=a("li.selected",k)[0],r(c,f,e,d)),false;case 27:return e.hide(),false}return true});a(c).keyup(function(){h=false});this.getTime=function(){return q(c.value,d)};this.setTime=function(b){c.value=n(o(b,d),d);a(c).change()}};a.fn.timePicker.defaults={step:30,startTime:new Date(0,0,0,0,0,0),endTime:new Date(0,0,0,23,30,
0),separator:":",show24Hours:true}})(jQuery);
var ved="div.view_event_details",ced="#com_event_dialog",ccd="#create_calendar_dialog",mcd="#modify_calendar_dialog",dcd="#delete_calendar_dialog";
$(document).ready(function(){set_default_datepicker_options();set_default_colorpicker_options();$("#calendar_view").fullCalendar({selectable:true,editable:true,firstDay:prefs_firstday,timeFormat:{agenda:prefs_timeformat+"{ - "+prefs_timeformat+"}","":prefs_timeformat},columnFormat:{month:prefs_format_column_month,week:prefs_format_column_week,day:prefs_format_column_day},titleFormat:{month:prefs_format_title_month,week:prefs_format_title_week,day:prefs_format_title_day},weekMode:"liquid",aspectRatio:1.2,
height:calendar_height(),windowResize:function(){$(this).fullCalendar("option","height",calendar_height())},header:{left:"month,agendaWeek,agendaDay",center:"title",right:"today prev,next"},monthNames:_("labels","months_long"),monthNamesShort:_("labels","months_short"),dayNames:_("labels","daynames_long"),dayNamesShort:_("labels","daynames_short"),buttonText:{today:_("labels","today"),month:_("labels","month"),week:_("labels","week"),day:_("labels","day")},theme:true,allDayText:_("labels","allday"),
axisFormat:prefs_timeformat,slotMinutes:30,firstHour:8,allDayDefault:false,loading:function(a){a?$("#calendar_view").mask(_("messages","overlay_synchronizing"),500):$("#calendar_view").unmask()},eventRender:function(a,b){b.qtip({content:{text:event_bubble_content(a),title:{text:a.title,button:true}},position:{target:"mouse",viewport:$("#calendar_view"),adjust:{x:10,y:10,mouse:false}},style:{classes:"view_event_details",tip:false,widget:true},show:{event:false,solo:true},hide:{fixed:true,event:"unfocus"},
events:{show:function(a,b){$(window).bind("keydown.tooltipevents",function(a){a.keyCode===27&&b.hide(a)});var e=b.elements.tooltip.find("div.actions").find("button.addicon").button();add_button_icons(e)},hide:function(){$(window).unbind("keydown.tooltipevents")}}})},eventClick:function(a,b){set_data("current_event",a);$(this).qtip("show",b)},select:function(a,b,c,d,e){c=e.name=="month"?false:c;a={start:fulldatetimestring(a),end:fulldatetimestring(b),allday:c,view:e.name,current_calendar:$("#calendar_list li.selected_calendar").data().calendar};
$("#calendar_view").fullCalendar("unselect");event_field_form("new",a)},selectHelper:function(a,b){var c=$("#calendar_list li.selected_calendar").data().color;return $('<div style="background-color: '+c+'" class="selecthelper"/>').text($.fullCalendar.formatDates(a,b,prefs_timeformat+"{ - "+prefs_timeformat+"}"))},eventResize:function(a,b,c,d,e,f,h){b=generate_on_the_fly_form(base_app_url+"caldav2json/resize_or_drag_event",{uid:a.uid,calendar:a.calendar,etag:a.etag,view:h.name,dayDelta:b,minuteDelta:c,
allday:a.allDay,was_allday:a.was_allday,timezone:a.timezone,type:"resize"});if(get_data("formcreation")=="ok"){var g=$("#"+b);proceed_send_ajax_form(g,function(b){update_single_event(a,b)},function(a){show_error(_("messages","error_modfailed"),a);d()},function(){d()})}$(g).remove()},eventDrop:function(a,b,c,d,e,f,h,g){b=generate_on_the_fly_form(base_app_url+"caldav2json/resize_or_drag_event",{uid:a.uid,calendar:a.calendar,etag:a.etag,view:g.name,dayDelta:b,minuteDelta:c,allday:a.allDay,was_allday:a.orig_allday,
timezone:a.timezone,type:"drag"});if(get_data("formcreation")=="ok"){var i=$("#"+b);proceed_send_ajax_form(i,function(b){update_single_event(a,b)},function(a){show_error(_("messages","error_modfailed"),a);e()},function(){e()})}$(i).remove()}});$("#calendar_view td.fc-header-right").append('<span class="fc-header-space"></span><span class="fc-button-refresh">'+_("labels","refresh")+"</span>");$("#calendar_view span.fc-button-refresh").button().click(function(){$("#calendar_view").fullCalendar("refetchEvents")});
$("#calendar_view span.fc-button-today").after('<span class="fc-header-space"></span><span class="fc-button-datepicker"><img src="'+base_url+'/img/datepicker.gif" alt="'+_("labels","choose_date")+'" /></span><input type="hidden" id="datepicker_fullcalendar" />');$("#datepicker_fullcalendar").datepicker({changeYear:true,closeText:_("labels","cancel"),onSelect:function(){var a=$("#datepicker_fullcalendar").datepicker("getDate");$("#calendar_view").fullCalendar("gotoDate",a)}});$("#calendar_view span.fc-button-datepicker").click(function(){$("#datepicker_fullcalendar").datepicker("setDate",
$("#calendar_view").fullCalendar("getDate"));$("#datepicker_fullcalendar").datepicker("show")});$(ved+" button.link_delete_event").live("click",function(){var a=get_data("current_event");if(a===void 0)show_error(_("messages","error_interfacefailure"),_("messages","error_current_event_not_loaded"));else return load_generated_dialog("dialog_generator/delete_event",{},function(){$("#delete_event_dialog span.calendar").html(get_calendar_displayname(a.calendar));$("#delete_event_dialog p.title").html(a.title);
a.rrule===void 0&&$("#delete_event_dialog div.rrule").hide();var b=$("#delete_form");b.find("input.uid").val(a.uid);b.find("input.calendar").val(a.calendar);b.find("input.href").val(a.href);b.find("input.etag").val(a.etag)},_("labels","deleteevent"),[{text:_("labels","yes"),"class":"addicon btn-icon-event-delete",click:function(){var a=$("#delete_form");proceed_send_ajax_form(a,function(){$("#calendar_view").fullCalendar("removeEvents",get_data("current_event").id)},function(a){show_error(_("messages",
"error_event_not_deleted"),a)},function(){});destroy_dialog("#delete_event_dialog")}},{text:_("labels","cancel"),"class":"addicon btn-icon-cancel",click:function(){destroy_dialog("#delete_event_dialog")}}],"delete_event_dialog",400),$(this).parents(ved).qtip("hide"),false});$("#calendar_view").fullCalendar("renderEvent",{title:"Little portal",start:"1985-02-15T00:00:00Z",end:"1985-02-15T23:59:59Z",allDay:true,editable:false,color:"#E78AEF"},true);$(ved+" button.link_edit_event").live("click",function(){var a=
get_data("current_event");if(a===void 0)show_error(_("messages","error_interfacefailure"),_("messages","error_current_event_not_loaded"));else return a={uid:a.uid,calendar:a.calendar,href:a.href,etag:a.etag,start:fulldatetimestring(a.start),end:fulldatetimestring(a.end),summary:a.title,location:a.location,allday:a.allDay,description:a.description,rrule:a.rrule,rrule_serialized:a.rrule_serialized,rrule_explained:a.rrule_explained,icalendar_class:a.icalendar_class,transp:a.transp,recurrence_id:a.recurrence_id,
orig_start:fulldatetimestring($.fullCalendar.parseDate(a.orig_start)),orig_end:fulldatetimestring($.fullCalendar.parseDate(a.orig_end))},$(this).parents(ved).qtip("hide"),event_field_form("modify",a),false});$("li.available_calendar").live("click",function(){$("#calendar_list li.selected_calendar").removeClass("selected_calendar");$(this).addClass("selected_calendar");$(this).css("color",$(this).data().eventsource.textColor)});$("li.available_calendar").live("dblclick",function(a){a.preventDefault();
calendar_modify_form(this)});update_calendar_list(true);$("#calendar_list_refresh").click(function(){update_calendar_list(true)});$("#calendar_add").click(calendar_create_form);$("#shortcut_add_event").button({icons:{primary:"ui-icon-plusthick"}}).bind("click",function(){var a={start:fulldatetimestring($("#calendar_view").fullCalendar("getDate")),allday:false,view:"month",current_calendar:$("#calendar_list li.selected_calendar").data().calendar};$("#calendar_view").fullCalendar("unselect");event_field_form("new",
a)})});function calendar_height(){return $(window).height()-24-25-$("#footer").height()}function show_error(a,b){$("#popup").freeow(a,b,{classes:["popup_error"],autoHide:false,showStyle:{opacity:1,left:0},hideStyle:{opacity:0,left:"400px"}})}function show_success(a,b){$("#popup").freeow(a,b,{classes:["popup_success"],autoHide:true,autoHideDelay:2E3,showStyle:{opacity:1,left:0},hideStyle:{opacity:0,left:"400px"}})}function get_data(a){return $("body").data(a)}
function set_data(a,b){$("body").data(a,b)}
function load_generated_dialog(a,b,c,d,e,f,h){f="#"+f;if($(f).length!=0)return false;b=generate_on_the_fly_form(base_app_url+"caldav2json/edit_event",b);if(get_data("formcreation")=="ok"){b=$("#"+b);$(b).attr("action");var g=$(b).serialize();$.ajax({url:base_app_url+a,beforeSend:function(){$("body").mask(_("messages","overlay_loading_dialog"),500)},complete:function(){$("body").unmask()},cache:false,type:"POST",data:g,dataType:"html",error:function(a,b){show_error(_("messages","error_loading_dialog"),
_("messages","error_oops")+": "+b)},success:function(a){$("body").append(a);$(f).dialog({autoOpen:true,buttons:e,title:d,minWidth:h,modal:true,open:function(a){c();$(f).dialog("option","position","center");a=$(a.target).parent().find(".ui-dialog-buttonset").children();add_button_icons(a)},close:function(){$(this).remove()}})}});$(b).remove()}else show_error(_("messages","error_interfacefailure"),_("messages","error_oops"))}
function proceed_send_ajax_form(a,b,c,d){var e=$(a).attr("action"),a=$(a).serialize();$.ajax({url:e,beforeSend:function(){$("body").mask(_("messages","overlay_sending_form"),1E3)},complete:function(){$("body").unmask()},cache:false,type:"POST",data:a,dataType:"json",error:function(a,b){show_error(_("messages","error_interfacefailure"),_("messages","error_oops")+":"+b);set_data("lastoperation","failed");d()},success:function(a){var e=a.result,a=a.message;e=="ERROR"?(set_data("lastoperation","failed"),
show_error(_("messages","error_internal"),a),d()):e=="EXCEPTION"?(set_data("lastoperation","failed"),c(a)):e=="SUCCESS"?(set_data("lastoperation","success"),b(a)):show_error(_("messages","error_internal"),_("messages","error_oops")+":"+e)}})}
function generate_on_the_fly_form(a,b){for(var c="",d=0;d<10;d++)c+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(Math.floor(Math.random()*62));$.ajax({url:base_app_url+"dialog_generator/on_the_fly_form/"+c,cache:false,type:"POST",contentType:"text",dataType:"text",async:false,error:function(a,b){show_error(_("messages","error_genform"),b);set_data("formcreation","failed")},success:function(e){$("body").append(e);$("#"+c).attr("action",a);$.each(b,function(a,b){$("#"+c).append('<input type="hidden" name="'+
a+'" value="'+b+'" />')});set_data("formcreation","ok")}});return c}function destroy_dialog(a){$(a).dialog("close");$(a).dialog("destroy");$(a).remove()}
function set_default_datepicker_options(){$.datepicker.regional.custom={closeText:_("labels","close"),prevText:_("labels","previous"),nextText:_("labels","next"),currentText:_("labels","today"),monthNames:_("labels","months_long"),monthNamesShort:_("labels","months_short"),dayNames:_("labels","daynames_long"),dayNamesShort:_("labels","daynames_short"),dayNamesMin:_("labels","daynames_short"),weekHeader:"Sm",firstDay:prefs_firstday,isRTL:false,showMonthAfterYear:false,yearSuffix:""};$.datepicker.setDefaults($.datepicker.regional.custom);
$.datepicker.setDefaults({constrainInput:true});$.datepicker.setDefaults({dateFormat:prefs_dateformat})}function set_end_minDate(){var a=ced+" input.end_date",b=ced+" input.recurrence_until",c=$(ced+" input.start_date").datepicker("getDate");$(ced+" input.allday").is(":checked")&&c.setTime(c.getTime()+864E5);$(a).datepicker("option","minDate",c);$(b).datepicker("option","minDate",c)}
function update_recurrency_options(a){a=="none"?($(ced+" input.recurrence_count").val(""),$(ced+" input.recurrence_until").val(""),$(ced+" input.recurrence_count").attr("disabled","disabled"),$(ced+" input.recurrence_count").addClass("ui-state-disabled"),$(ced+' label[for="recurrence_count"]').addClass("ui-state-disabled"),$(ced+" input.recurrence_until").attr("disabled","disabled"),$(ced+" input.recurrence_until").datepicker("disable"),$(ced+" input.recurrence_until").addClass("ui-state-disabled"),
$(ced+' label[for="recurrence_until"]').addClass("ui-state-disabled")):(enforce_exclusive_recurrence_field("recurrence_count","recurrence_until"),enforce_exclusive_recurrence_field("recurrence_until","recurrence_count"))}
function event_field_form(a,b){var c="dialog_generator/",d;a=="new"?(c+="create_event",d=_("labels","createevent")):(c+="edit_event",d=_("labels","editevent"));load_generated_dialog(c,b,function(){var b={show24Hours:prefs_timeformat_option=="24"?true:false,separator:":",step:30};$(ced+"_tabs").tabs();$(ced+" input.start_time").timePicker(b);$(ced+" input.end_time").timePicker(b);$(ced+" input.start_date").datepicker({onSelect:function(){set_end_minDate()}});$(ced+" input.end_date").datepicker();$(ced+
" input.recurrence_until").datepicker();$(ced+" input.end_time").data("untouched",true);set_end_minDate();update_recurrency_options($(ced+" select.recurrence_type").val());$(ced+" input.allday").change(function(){var a=$(ced+" input.start_date").datepicker("getDate");set_end_minDate();$(this).is(":checked")?($(ced+" input.start_time").hide(),$(ced+" input.end_time").hide()):($(ced+" input.end_date").removeAttr("disabled"),$(ced+" input.end_date").removeClass("ui-state-disabled"),$(ced+" input.end_date").datepicker("setDate",
a),$(ced+" input.start_time").show(),$(ced+" input.end_time").show())});$(ced+" select.recurrence_type").change(function(){$(this).val();update_recurrency_options($(this).val())});$(ced+" input.recurrence_count").change(function(){enforce_exclusive_recurrence_field("recurrence_count","recurrence_until")});$(ced+" input.recurrence_until").change(function(){enforce_exclusive_recurrence_field("recurrence_until","recurrence_count")});var c=$.timePicker(ced+" input.start_time").getTime(),d=$.timePicker(ced+
" input.end_time").getTime()-c.getTime();$(ced+" input.start_time").change(function(){if($(ced+" input.end_time").data("untouched")){var a=$.timePicker(ced+" input.start_time").getTime(),b=$.timePicker(ced+" input.end_time").getTime()-c.getTime();$.timePicker(ced+" input.end_time").setTime(new Date(a.getTime()+b));c=a}});$(ced+" input.end_time").change(function(){$.timePicker(this).getTime()-$.timePicker(ced+" input.start_time").getTime()!=d&&$(this).data("untouched",false)});a=="new"&&$('input[name="summary"]').focus()},
d,[{text:_("labels","save"),"class":"addicon btn-icon-event-edit",click:function(){var a=$("#com_form");proceed_send_ajax_form(a,function(a){$.each(a,function(a,b){reload_event_source(b)});destroy_dialog(ced)},function(a){show_error(_("messages","error_invalidinput"),a)},function(){})}},{text:_("labels","cancel"),"class":"addicon btn-icon-cancel",click:function(){destroy_dialog(ced)}}],"com_event_dialog",500)}
function update_single_event(a,b){$.each(b,function(b,d){a[b]=d});$("#calendar_view").fullCalendar("updateEvent",a)}
function calendar_create_form(){var a=_("labels","newcalendar");load_generated_dialog("dialog_generator/create_calendar",{},function(){$("input.pick_color").colorPicker()},a,[{text:_("labels","create"),"class":"addicon btn-icon-calendar-add",click:function(){var a=$("#calendar_create_form");proceed_send_ajax_form(a,function(){destroy_dialog(ccd);update_calendar_list(false)},function(a){show_error(_("messages","error_invalidinput"),a)},function(){})}},{text:_("labels","cancel"),"class":"addicon btn-icon-cancel",
click:function(){destroy_dialog(ccd)}}],"create_calendar_dialog",500)}
function calendar_modify_form(a){var b=_("labels","modifycalendar"),c=$(a).data(),d={calendar:c.calendar,color:c.color,displayname:c.displayname,sid:c.sid,shared:c.shared,user_from:c.user_from,url:c.url},e=[{text:_("labels","deletecalendar"),"class":"addicon btn-icon-calendar-delete",click:function(){destroy_dialog(mcd);load_generated_dialog("dialog_generator/delete_calendar",{calendar:$(a).data().calendar,displayname:$(a).data().displayname},function(){},_("labels","delete"),[{text:_("labels","yes"),
"class":"addicon btn-icon-calendar-delete",click:function(){var b=$("#delete_calendar_form");proceed_send_ajax_form(b,function(){$(a).data();$("#calendar_view").fullCalendar("removeEventSource",$(a).data().eventsource);$(a).hasClass("selected_calendar")&&$("#calendar_list li.available_calendar:first").click();$(a).remove()},function(a){show_error(_("labels","error_caldelete"),a)},function(){});destroy_dialog(dcd)}},{text:_("labels","cancel"),"class":"addicon btn-icon-cancel",click:function(){destroy_dialog(dcd)}}],
"delete_calendar_dialog",500)}},{text:_("labels","save"),"class":"addicon btn-icon-calendar-edit",click:function(){var a=$("#modify_calendar_form");proceed_send_ajax_form(a,function(){destroy_dialog(mcd);update_calendar_list(false)},function(a){show_error(_("messages","error_invalidinput"),a)},function(){})}},{text:_("labels","cancel"),"class":"addicon btn-icon-cancel",click:function(){destroy_dialog(mcd)}}];c.shared===true&&e.splice(0,1);load_generated_dialog("dialog_generator/modify_calendar",d,
function(){$("input.pick_color").colorPicker();$(mcd+"_tabs").tabs();$("input.share_with").tagit({caseSensitive:false,removeConfirmation:true})},b,e,"modify_calendar_dialog",500)}
function update_calendar_list(a){$.ajax({url:base_app_url+"caldav2json/calendar_list",cache:false,dataType:"json",async:false,beforeSend:function(){a&&$("body").mask(_("messages","overlay_loading_calendar_list"),500)},complete:function(){a&&$("body").unmask()},error:function(a,c){show_error(_("messages","error_loading_calendar_list"),_("messages","error_oops")+c)},success:function(a){$("#calendar_list li.available_calendar").each(function(){var a=$(this).data();$("#calendar_view").fullCalendar("removeEventSource",
a.eventsource);$(this).remove()});var c=0;$.each(a,function(a,b){c++;var f=generate_calendar_entry(b);$("#calendar_list ul").append(f);$("#calendar_view").fullCalendar("addEventSource",$(f).data().eventsource)});c==0?(a=get_data("last_calendar_count"),a===void 0||a!="0"?(set_data("last_calendar_count",0),setTimeout("update_calendar_list(false)",1)):show_error(_("messages","notice_no_calendars"),"")):(set_data("last_calendar_count",c),$("#calendar_list li.available_calendar:first").click())}})}
function generate_event_source(a){return{url:base_app_url+"caldav2json/events#"+a,cache:false,data:{calendar:a},error:function(){show_error(_("messages","error_interfacefailure"),_("messages","error_loadevents",{"%cal":a}))},startParamUTC:true,endParamUTC:true}}
function session_refresh(a){$.ajax({url:base_app_url+"js_generator/dumb",cache:false,method:"GET",success:function(){},error:function(){show_error(_("messages","error_interfacefailure"),_("messages","error_sessrefresh"))}});setTimeout("session_refresh("+a+")",a)}
function add_button_icons(a){a.filter("button.addicon").removeClass("addicon").removeClass("ui-button-text-only").addClass("ui-button-text-icon-primary").each(function(a,c){var d=$(c).attr("class").split(" ");$.each(d,function(a,b){if(b.match(/^btn-icon-/))return $(c).prepend('<span class="ui-button-icon-primary ui-icon '+b+'"></span>'),$(c).removeClass(b),false})})}
function generate_calendar_entry(a){a.color=a.color===void 0||a.color===false?"#"+default_calendar_color:a.color.substring(0,7);var b=fg_for_bg(a.color),c=$.color.parse(a.color),c=b=="#000000"?c.scale("rgb",0.8).toString():c.add("rgb",120).toString(),d=$("<li></li>").addClass("calendar_color").addClass("available_calendar").attr("title",a.displayname).css("background-color",a.color).css("border-color",c).css("color",b).html(a.shown_displayname);a.shared!==void 0&&a.shared==true&&(d.append('<span class="shared"></span>'),
d.attr("title",d.attr("title")+" (@"+a.user_from+")"));var e=generate_event_source(a.calendar);e.ignoreTimezone=true;e.color=a.color;e.textColor=b;a.eventsource=e;e.borderColor=c;d.data(a);d.disableSelection();return d}function get_calendar_displayname(a){var b=void 0;$("#calendar_list li.available_calendar").each(function(){var c=$(this).data();if(c.calendar==a)return b=c.displayname,false});return b!==void 0?b:event.calendar+"(?)"}
function reload_event_source(a){var b=void 0;$("#calendar_list li.available_calendar").each(function(){var c=$(this).data();if(c.calendar==a)return b=c.eventsource,false});b!==void 0?($("#calendar_view").fullCalendar("removeEventSource",b),$("#calendar_view").fullCalendar("addEventSource",b)):show_error(_("messages","error_interfacefailure"),_("messages","error_calendarnotfound",{"%calendar":a}))}
function enforce_exclusive_recurrence_field(a,b){$(ced+" input."+a).val()==""?($(ced+" input."+b).removeAttr("disabled"),$(ced+" input."+b).removeClass("ui-state-disabled"),$(ced+' label[for="'+b+'"]').removeClass("ui-state-disabled"),b=="recurrence_until"&&$(ced+" input."+b).datepicker("enable")):($(ced+" input."+b).attr("disabled","disabled"),$(ced+" input."+b).addClass("ui-state-disabled"),$(ced+" input."+b).val(""),$(ced+' label[for="'+b+'"]').addClass("ui-state-disabled"),b=="recurrence_until"&&
$(ced+" input."+b).datepicker("disable"))}
function event_bubble_content(a){var b=$("#view_event_details_template").clone();b.find("span.calendar_value").html(get_calendar_displayname(a.calendar));a.location!==void 0?b.find("span.location_value").html(a.location):b.find("p.location").hide();b.find("span.start_value").html(a.formatted_start+" - ").end().find("span.end_value").html(a.formatted_end+"");a.formatted_description!==void 0?b.find("p.description_value").html(a.formatted_description):b.find("p.description").hide();a.rrule!==void 0?
a.rrule_explained!==void 0?b.find("div.unparseable_rrule").hide().end().find("span.rrule_explained_value").html(a.rrule_explained):b.find("div.parseable_rrule").hide().end().find("span.rrule_raw_value").html(a.rrule).end():b.find("div.unparseable_rrule").hide().end().find("div.parseable_rrule").hide();return b.html()}function timestamp(a){return Math.round(a.getTime()/1E3)}function fulldatetimestring(a){if(a!=null&&a!==void 0)return $.fullCalendar.formatDate(a,"yyyyMMddHHmmss")}
function fg_for_bg(a){a=parseInt(a.substr(1),16);return(a>>>16)+(a>>>8&255)+(a&255)<500?"#ffffff":"#000000"};
